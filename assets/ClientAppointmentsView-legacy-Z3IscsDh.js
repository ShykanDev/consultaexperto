System.register(["./index-legacy-DrkdBnFf.js","./GenericModal-legacy-C9LBzt4Q.js","./index-legacy-CPnhazDU.js","./expertUi-legacy-DkShO27T.js","./hiring-legacy-CROFvB5V.js","./index-legacy-fWfzP0qb.js","./_plugin-vue_export-helper-legacy-BVIICed7.js","./animate-legacy-B6y0oQoX.js"],function(e,a){"use strict";var t,s,l,r,o,i,n,c,d,u,p,g,x,m,f,b,y,v,h,w,C,F,k,E,U,D,N,$,I,S,j,L,B,A,z,M,_,R,T,P,V,O,X;return{setters:[e=>{t=e.a,s=e.i,l=e.k,r=e.Z,o=e.l,i=e.j,n=e.r,c=e.b,d=e.o,u=e.f,p=e.e,g=e.Y,x=e.n,m=e.x,f=e.t,b=e.q,y=e.L,v=e.F,h=e.v,w=e.W,C=e.g,F=e.w,k=e.p,E=e.A,U=e.$,D=e.J,N=e.K,$=e.V,I=e.a0,S=e.a1,j=e.G,L=e.E,B=e.H,A=e.a2,z=e.m,M=e.a3,_=e.y},e=>{R=e.G},e=>{T=e.e},e=>{P=e.u},e=>{V=e.u},e=>{O=e.B},e=>{X=e._},null],execute:function(){var a=document.createElement("style");a.textContent=".animate-fade-in-up[data-v-f75ca20a]{animation:fadeInUp-f75ca20a .4s ease-out}@keyframes fadeInUp-f75ca20a{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}\n",document.head.appendChild(a);const q={class:"w-full mb-4 font-poppins"},H={class:"flex items-start justify-between gap-4"},G={class:"flex items-start gap-4 flex-1"},Y={class:"flex flex-col min-w-0"},J={class:"flex items-center gap-2 mb-1"},K={class:"text-xs text-gray-400 font-medium whitespace-nowrap"},W={class:"text-base font-bold text-gray-800 leading-tight truncate pr-2"},Z={class:"text-sm text-gray-500 font-medium truncate mb-2"},Q={class:"flex items-center flex-wrap gap-3 mt-1 text-sm text-gray-600"},ee={class:"flex items-center gap-1.5 bg-gray-50 px-2 py-1 rounded-lg"},ae={class:"font-semibold"},te={class:"flex items-center gap-1.5 bg-gray-50 px-2 py-1 rounded-lg"},se={class:"font-semibold"},le={key:0,class:"flex items-center gap-1 mt-2"},re={class:"flex flex-col items-center justify-center h-full pl-2 border-l border-gray-50"},oe={key:1,class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden animate-fade-in-up"},ie={class:"bg-gray-50/80 backdrop-blur-sm border-b border-gray-100 p-4 sticky top-0 z-10 flex items-center justify-between"},ne={class:"p-6 space-y-8"},ce={class:"text-center space-y-4"},de={class:"relative inline-block"},ue={key:0,class:"absolute -bottom-2 -right-2 bg-yellow-400 text-white p-1.5 rounded-full shadow-sm"},pe={class:"text-2xl font-bold text-gray-800"},ge={class:"text-gray-500 mt-1"},xe={class:"text-sm text-gray-400 font-medium"},me={key:0,class:"flex justify-center"},fe={key:1,class:"flex flex-col items-center gap-1 bg-gray-50 px-4 py-2 rounded-xl"},be={class:"flex gap-1"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"bg-gray-50 rounded-2xl p-5 border border-gray-100"},he={class:"text-sm font-bold text-gray-800 uppercase tracking-widest mb-4 flex items-center gap-2"},we={class:"space-y-4"},Ce={class:"flex justify-between items-center p-3 bg-white rounded-xl shadow-sm"},Fe={class:"font-semibold text-gray-800 text-sm capitalize"},ke={class:"flex justify-between items-center p-3 bg-white rounded-xl shadow-sm"},Ee={class:"font-semibold text-gray-800 text-sm"},Ue={class:"flex justify-between items-center p-3 bg-white rounded-xl shadow-sm"},De={class:"font-semibold text-gray-800 text-xs"},Ne={key:0,class:"p-3 bg-blue-50/50 rounded-xl border border-blue-100"},$e={class:"flex items-start gap-3"},Ie={class:"bg-blue-100 rounded-lg p-2 text-blue-600"},Se={class:"flex-1"},je={key:0,class:"text-xs text-blue-700"},Le={key:1,class:"text-xs text-blue-700 flex items-center gap-1"},Be={key:2},Ae={class:"space-y-6"},ze={class:"bg-gray-50 rounded-2xl p-5 border border-gray-100"},Me={class:"text-sm font-bold text-gray-800 uppercase tracking-widest mb-4 flex items-center gap-2"},_e={class:"flex items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100"},Re={class:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 text-xl font-bold"},Te={class:"flex-1 min-w-0"},Pe={class:"text-gray-900 font-bold text-sm truncate"},Ve={class:"text-gray-500 text-xs"},Oe={class:"mt-4 text-center"},Xe={class:"flex items-center justify-center gap-1 mt-1"},qe={class:"absolute right-0 top-0 opacity-10 transform translate-x-1/4 -translate-y-1/4"},He={class:"relative z-10 flex items-center gap-3"},Ge={class:"bg-white/20 p-2 rounded-lg"},Ye={key:0,class:"bg-red-50 rounded-2xl p-5 border border-red-100"},Je={class:"text-sm font-bold text-red-800 uppercase tracking-widest mb-3 flex items-center gap-2"},Ke={class:"space-y-2 text-sm"},We={class:"text-red-700"},Ze={class:"text-red-600 text-xs"},Qe={class:"text-red-600 text-xs"},ea={key:0,class:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-100"},aa=["disabled"],ta={class:"space-y-4"},sa={class:"space-y-6 text-center"},la={class:"text-sm text-gray-500"},ra={class:"font-semibold text-gray-800"},oa={class:"flex flex-col gap-3"},ia=["onClick"],na={class:"flex gap-1 text-lg group-hover:scale-110 transition-transform"},ca=X(t({__name:"CardInfo",props:{data:{type:Object,required:!0},index:{type:Number}},setup(e){const a=s(),t=l(!1),j=l(!1),L=l(5),B=l([{specialty:"ImportaciÃ³n y ExportaciÃ³n",color:{light:"#E6F3FF",strong:"#0066CC"},icon:"fa-truck-moving",description:"Facilitamos el intercambio de bienes y servicios a nivel internacional con normativas seguras."},{specialty:"MÃ©dico",color:{light:"#E6F7FF",strong:"#0099CC"},icon:"gi-stethoscope",description:"Profesionales de la salud comprometidos en atender tus necesidades mÃ©dicas de forma personalizada."},{specialty:"Contador",color:{light:"#E6FFE6",strong:"#008000"},icon:"bi-calculator-fill",description:"Expertos en contabilidad para gestionar tus finanzas de forma precisa y confiable."},{specialty:"Arquitecto",color:{light:"#F0E6FF",strong:"#6600CC"},icon:"md-architecture-sharp",description:"DiseÃ±o y planificaciÃ³n de espacios con profesionalismo y creatividad."},{specialty:"Servicios Web",color:{light:"#E6F9FF",strong:"#00BFFF"},icon:"md-web",description:"Desarrollo de soluciones digitales a medida para potenciar tu presencia online."},{specialty:"Publicidad",color:{light:"#FFF0E6",strong:"#FF6600"},icon:"ri-newspaper-fill",description:"Estrategias creativas para difundir y potenciar la imagen de tu marca."},{specialty:"Traductores",color:{light:"#FFF8E6",strong:"#FFD700"},icon:"hi-solid-translate",description:"Especialistas en comunicaciÃ³n multilingÃ¼e para romper barreras idiomÃ¡ticas."},{specialty:"Peritaje",color:{light:"#F0E6FF",strong:"#800080"},icon:"gi-sherlock-holmes",description:"Evaluaciones tÃ©cnicas y profesionales con rigor y precisiÃ³n."},{specialty:"IngenierÃ­a en ComputaciÃ³n",color:{light:"#E6FFFA",strong:"#00CED1"},icon:"md-computer-twotone",description:"InnovaciÃ³n tecnolÃ³gica y desarrollo de sistemas a la vanguardia."},{specialty:"GestorÃ­a en TrÃ¡mites",color:{light:"#E6E6FF",strong:"#4B0082"},icon:"ri-newspaper-fill",description:"Optimiza tus gestiones administrativas con asesorÃ­as especializadas."},{specialty:"Marketing",color:{light:"#FFE6F0",strong:"#FF1493"},icon:"ri-marketing-strategy-fill",description:"Conecta con tu audiencia a travÃ©s de estrategias innovadoras y efectivas."},{specialty:"Abogado",color:{light:"#F5E6D3",strong:"#8B4513"},icon:"fa-balance-scale",description:"Conecta con un abogado especializado para recibir asesorÃ­a legal directa y resolver tus asuntos jurÃ­dicos."},{specialty:"PsicÃ³logo/a",color:{light:"#E6E6FF",strong:"#6A5ACD"},icon:"ri-psychotherapy-fill",description:"AsesorÃ­a psicolÃ³gica para resolver tus dudas y resolver tus problemas."},{specialty:"Maestro",color:{light:"#F0FFF0",strong:"#2E8B57"},icon:"gi-teacher",description:"AsesorÃ­a educativa para resolver tus dudas y resolver tus problemas."},{specialty:"Chef",color:{light:"#FFE6E6",strong:"#FF4500"},icon:"gi-chef-toque"}]),A=e=>{if(_.data.isCanceled)return"#fff0f0";if(_.data.isFinished)return"#f0fff0";if(!_.data.isFinished&&!_.data.isCanceled)return"#f0fbff";const a=B.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.color.light:"#E6E6E6"},z=e=>{if(_.data.isCanceled)return"#ff8080";if(_.data.isFinished)return"#00966A";const a=B.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.color.strong:"#E6E6E6"},M=e=>{const a=B.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.icon:""};l(!0);const _=e,X=r(()=>{var e;if(_.data.appointmentDate)return new Date(1e3*_.data.appointmentDate.seconds);if(null===(e=_.data)||void 0===e||!e.createdAt)return null;const a=new Date(1e3*_.data.createdAt.seconds),t=a.getDay(),s=(e=>{const a=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return["domingo","lunes","martes","miercoles","jueves","viernes","sabado"].findIndex(e=>a.includes(e))})(_.data.DayName||_.data.dayName||"");if(-1===s)return a;let l=s-t;l<0&&(l+=7);const r=new Date(a);return r.setDate(a.getDate()+l),r}),ca=r(()=>X.value?X.value.toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Fecha no disponible"),da=r(()=>_.data.expertSchedule.time),ua=r(()=>{var e;return(null===(e=X.value)||void 0===e?void 0:e.toLocaleDateString("es-MX",{weekday:"long"}))||_.data.DayName}),pa=l("card");o(()=>{T.init({blockHeadless:!0,publicKey:"8uRc3wp2ZXACkO_Eb"})});const ga=()=>{pa.value="card"===pa.value?"modal":"card"},xa=()=>{if(_.data.isCanceled||_.data.isFinished)console.log("La cita ya fue cancelada o finalizada");else if(_.data.isOpenedLinkByExpert)try{O.open({url:_.data.appointmentLink})}catch(e){console.log(e)}else console.log("El experto no ha abierto la cita")},ma=i(),fa=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),ba=async()=>{try{const e=$.now(),a=D(ma,`experts/${_.data.expertUid}`),t=await N(a);if(!t.exists())return console.log("Could not find the expert document"),!1;const s=t.data().schedule;console.log(`Expert Data: ${JSON.stringify(s)}`),console.log(`Formatted Day: ${fa(ua.value)}`);const l=Object.keys(s).find(e=>fa(e)==fa(ua.value));console.log(`Match Day: ${l}`);const r=s[l];console.log(`Expert Schedule Slot: ${r}`);const o=null==r?void 0:r.find(e=>e.takenBy==_.data.userUid);if(console.log(`Slot Match: ${o}`),!o)return console.log("Could not find the expert slot for this appointment"),!1;if(o.takenBy=null,o.takenAt=null,!_.data.docRef)return console.log("Couldn't find docRef for this document "),!1;const i=U(ma);i.update(a,{schedule:s}),console.log(`Document doc Ref: ${_.data.docRef}`),i.update(D(ma,`schedules/${_.data.docId}`),{isCanceled:!0,cancelationReason:Ea.value,canceledAt:e,canceledByUid:y().getUserUid||"",canceledByName:y().getUserName||""});const n=`${_.data.expertUid}_${l}_${o.time}`,c=D(ma,"bookings",n);return i.delete(c),console.log(`Guardian deleted: ${n}`),await i.commit(),await(async e=>{try{var a;T.send("service_q9e8lj2","template_lv5dfds",{headerTitle:"ConsultaExperto.com",greeting:"Se ha cancelado su cita",userName:_.data.userName,headerDescription:"ConfirmaciÃ³n de cancelaciÃ³n de cita",section1Icon:"ðŸ‘¤",section1Title:"InformaciÃ³n del usuario",section1TitleColor:"#007aff",section1Item1Label:"Nombre:",section1Item1Value:_.data.userName,section1Item2Label:"Servicio:",section1Item2Value:_.data.expertSpecialty,section2Icon:"ðŸ“…",section2Title:"Cita cancelada",section2TitleColor:"#ff3b30",section2Subtitle1:"Cita programada para",section2Value1:`â€¢ ${null===(a=X.value)||void 0===a?void 0:a.toLocaleString("es-MX",{dateStyle:"full"})} a las ${da.value}hrs`,section2Subtitle2:"Cancelada el",section2Value2:e.toDate().toLocaleString("es-MX",{dateStyle:"full",timeStyle:"long"}),section2HighlightLabel:"Cancelada por:",section2HighlightText:`${y().getUserName},  con motivo: ${Ea.value||"Motivo no proporcionado"}`,section3Icon:"ðŸ©º",section3Title:"Datos del experto",section3TitleColor:"#8e8e93",section3Item1Label:"Nombre",section3Item1Value:_.data.expertName,section3Item2Label:"CÃ©dula",section3Item2Value:_.data.expertProfessionalId,footerYear:(new Date).getFullYear(),footerLinkUrl:"https://consultaexperto.com",footerLinkText:"consultaexperto.com",footerRightsText:"Todos los derechos reservados.",email:y().getUserEmail})}catch(t){console.log(t)}})(e),console.log("Appointment canceled successfully"),!0}catch(e){return console.error("Error in batch function:",e),!1}},ya=l(!1),va=l(""),ha=async()=>{try{ya.value=!0,va.value="Finalizando cita...";const a=U(ma),t=D(ma,`experts/${_.data.expertUid}`),s=await N(t);if(!s.exists())return console.log("Could not find the expert document"),ya.value=!1,!1;const l=s.data().schedule;console.log(`Expert Data: ${JSON.stringify(l)}`),console.log(`Formatted Day: ${fa(ua.value)}`);const r=Object.keys(l).find(e=>fa(e)==fa(ua.value));console.log(`Match Day: ${r}`);const o=l[r];console.log(`Expert Schedule Slot: ${o}`);const i=null==o?void 0:o.find(e=>e.takenBy==_.data.userUid);if(console.log(`Slot Match: ${i}`),!i)return console.log("Could not find the expert slot for this appointment"),ya.value=!1,!1;i.takenBy=null,i.takenAt=null,a.update(t,{schedule:l}),a.update(D(ma,`schedules/${_.data.docId}`),{isFinished:!0,finishedAt:$.now(),finishedByUid:y().getUserUid||"UID no disponible",finishedByName:y().getUserName||"Nombre no disponible"});const n=`${_.data.expertUid}_${r}_${i.time}`,c=D(ma,"bookings",n);a.delete(c),console.log(`Guardian deleted: ${n}`),await a.commit(),ya.value=!1;try{wa()}catch(e){console.error("Error presenting rating alert",e)}}catch(a){console.error("Error finalizando la cita:",a),ya.value=!1}},wa=()=>{j.value=!0},Ca=async()=>{try{await Fa(L.value),await ka(L.value)}catch(e){console.error("Error updating rating:",e)}j.value=!1},Fa=async e=>{if(e<1||e>5)return!1;if(!y().getUserUid||!y().getUserName)return console.log("No user data available"),!1;console.log(`Is user Expert: ${y().getIsExpert}`),console.log(`User UID: ${y().getUserUid}`),console.log(`User Name: ${y().getUserName}`);const a=y().getIsExpert?"users":"experts",t=y().getIsExpert?"User":"Expert",s="users"===a?_.data.userUid:_.data.expertUid;let l;try{l=D(ma,`${a}/${s}`),await I(l,{[`rating.stars.${e}`]:S(1),"rating.total":S(e),"rating.count":S(1),[`ratedBy${t}`]:!0}),console.log(`${a} stars updated successfully to user with uid: ${s}`)}catch(r){console.log(`Error trying to update ${a} stars : ${r}`)}},ka=async e=>{if(e<1||e>5)return!1;if(!y().getUserUid||!y().getUserName)return console.log("No user data available"),!1;const a=y().getIsExpert?"Expert":"User";let t;try{t=D(ma,`${_.data.docRef.path}`),await I(t,{[`ratedBy${a}`]:!0,[`consultRatingBy${a}`]:e}),console.log(`${a} consult rating updated successfully to user with uid: ${y().getUserUid}`)}catch(s){console.log(`Error trying to update ${a} consult rating : ${s}`)}},Ea=l(""),Ua=()=>{t.value=!0},Da=async()=>{Ea.value.trim()&&(t.value=!1,await ba())},Na=async()=>{if(!Sa(_.data.expertUid))try{if(!_.data.expertUid)return void console.error("No expert UID provided");P().setExpertUid(_.data.expertUid),a.push("/expert-info-fixed")}catch(e){console.error("Navigation error:",e)}},$a=V(),Ia=()=>{_.data.expertName&&_.data.expertSpecialty&&_.data.expertUid&&($a.setExpertHiringData(_.data.expertName,_.data.expertSpecialty,_.data.expertUid),a.push("/hiring"))},Sa=e=>{var a;if(!e)return!1;const t=null===(a=y().getUserData)||void 0===a?void 0:a.expertsBlocked;return!!t&&(t[e]?(console.log(`Expert ${e} is blocked`),!0):(console.log(`Expert ${e} is not blocked`),!1))},ja=l(!1);return"modal"===pa.value&&(ja.value=Sa(_.data.expertUid)),(e,s)=>{var l,r,o;const i=n("v-icon");return d(),c("div",q,["card"===pa.value?(d(),c("div",{key:0,onClick:ga,class:"group relative bg-white rounded-2xl p-5 border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer overflow-hidden"},[s[4]||(s[4]=p("div",{class:"absolute top-0 left-0 w-1 h-full bg-blue-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),p("div",H,[p("div",G,[p("div",{class:"w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 transition-transform group-hover:scale-105",style:g({backgroundColor:A(_.data.expertSpecialty),color:z(_.data.expertSpecialty)})},[u(i,{name:M(_.data.expertSpecialty),scale:"1.5"},null,8,["name"])],4),p("div",Y,[p("div",J,[p("span",{class:m(["text-[10px] uppercase tracking-wider font-bold px-2 py-0.5 rounded-full",{"bg-emerald-100 text-emerald-700":_.data.isFinished,"bg-red-100 text-red-700":_.data.isCanceled,"bg-blue-100 text-blue-700":!_.data.isFinished&&!_.data.isCanceled}])},f(_.data.isFinished?"Finalizada":_.data.isCanceled?"Cancelada":"Programada"),3),p("span",K,f(null===(l=_.data.createdAt)||void 0===l?void 0:l.toDate().toLocaleDateString("es-MX")),1)]),p("h3",W,f(_.data.expertName),1),p("p",Z,f(_.data.expertSpecialty),1),p("div",Q,[p("div",ee,[u(i,{name:"fa-calendar-alt",scale:"0.8",class:"text-blue-500"}),p("span",ae,f(ca.value),1)]),p("div",te,[u(i,{name:"fa-clock",scale:"0.8",class:"text-blue-500"}),p("span",se,f(da.value)+" hrs",1)])]),b(y)().getIsClient&&_.data.isFinished?(d(),c("div",le,[(d(!0),c(v,null,h(_.data.consultRatingByUser,(e,a)=>(d(),w(i,{class:"text-yellow-400",key:a,name:"bi-star-fill",scale:"0.7"}))),128))])):x("",!0)])]),p("div",re,[u(i,{name:"fa-chevron-right",class:"text-gray-300 group-hover:text-blue-500 transition-colors"})])])])):(d(),c("div",oe,[p("div",ie,[p("button",{onClick:ga,class:"flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors font-medium text-sm px-3 py-1.5 rounded-lg hover:bg-white hover:shadow-sm"},[u(i,{name:"fa-arrow-left",scale:"0.9"}),s[5]||(s[5]=p("span",null,"Volver",-1))]),s[6]||(s[6]=p("span",{class:"text-xs font-bold text-gray-400 uppercase tracking-widest"},"Detalles de la Cita",-1))]),p("div",ne,[p("div",ce,[p("div",de,[p("div",{class:m(["w-20 h-20 rounded-2xl flex items-center justify-center mx-auto shadow-sm",{"bg-emerald-50 text-emerald-600":_.data.isFinished,"bg-red-50 text-red-600":_.data.isCanceled,"bg-blue-50 text-blue-600":!_.data.isFinished&&!_.data.isCanceled}])},[u(i,{name:_.data.isFinished?"fa-check-circle":_.data.isCanceled?"fa-times-circle":"fa-calendar-check",scale:"2.5"},null,8,["name"])],2),_.data.isFinished&&!_.data.ratedByUser?(d(),c("div",ue,[u(i,{name:"bi-star-fill",scale:"0.8"})])):x("",!0)]),p("div",null,[p("h2",pe,f(_.data.isFinished?"Cita Finalizada":_.data.isCanceled?"Cita Cancelada":"Cita\n              Programada"),1),p("p",ge,[s[7]||(s[7]=C(" Con ",-1)),p("span",{class:"font-semibold text-blue-600 cursor-pointer hover:underline",onClick:Na},f(_.data.expertName),1)]),p("p",xe,f(_.data.expertSpecialty),1)]),!_.data.isCanceled&&_.data.isFinished?(d(),c("div",me,[_.data.ratedByUser?(d(),c("div",fe,[s[9]||(s[9]=p("span",{class:"text-xs text-gray-400"},"Su calificaciÃ³n",-1)),p("div",be,[(d(!0),c(v,null,h(_.data.consultRatingByUser,e=>(d(),w(i,{class:"text-yellow-400",key:e,name:"bi-star-fill",scale:"0.9"}))),128))])])):(d(),c("button",{key:0,onClick:wa,class:"bg-yellow-50 text-yellow-700 px-4 py-2 rounded-xl text-sm font-semibold hover:bg-yellow-100 transition-colors flex items-center gap-2 border border-yellow-200"},[s[8]||(s[8]=p("span",null,"Calificar Experto",-1)),u(i,{name:"bi-star",scale:"1"})]))])):x("",!0)]),p("div",ye,[p("div",ve,[p("h3",he,[u(i,{name:"bi-calendar-event",class:"text-blue-500"}),s[10]||(s[10]=C(" Datos de la Cita ",-1))]),p("div",we,[p("div",Ce,[s[11]||(s[11]=p("span",{class:"text-gray-500 text-sm"},"Fecha",-1)),p("span",Fe,f(ca.value),1)]),p("div",ke,[s[12]||(s[12]=p("span",{class:"text-gray-500 text-sm"},"Hora",-1)),p("span",Ee,f(da.value)+" hrs",1)]),p("div",Ue,[s[13]||(s[13]=p("span",{class:"text-gray-500 text-sm"},"Creada",-1)),p("span",De,f(null===(r=_.data.createdAt)||void 0===r?void 0:r.toDate().toLocaleString("es-MX",{dateStyle:"short",timeStyle:"short"})),1)]),_.data.isCanceled||_.data.isFinished?x("",!0):(d(),c("div",Ne,[p("div",$e,[p("div",Ie,[u(i,{name:"co-link",scale:"1"})]),p("div",Se,[s[17]||(s[17]=p("h4",{class:"text-sm font-bold text-blue-900 mb-1"},"Enlace de video",-1)),_.data.appointmentLink||_.data.acceptedByExpert?_.data.appointmentLink&&_.data.acceptedByExpert&&!_.data.isOpenedLinkByExpert?(d(),c("p",Le,[u(i,{name:"fa-check-circle",scale:"0.8"}),s[14]||(s[14]=C(" Confirmada. Enlace disponible al iniciar. ",-1))])):x("",!0):(d(),c("p",je," Se generarÃ¡ cuando el experto confirme. ")),_.data.appointmentLink&&_.data.acceptedByExpert&&_.data.isOpenedLinkByExpert?(d(),c("div",Be,[s[16]||(s[16]=p("p",{class:"text-xs text-blue-800 mb-2"},"Â¡La sala estÃ¡ abierta!",-1)),p("button",{onClick:xa,class:"w-full bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold py-2 rounded-lg transition-colors flex items-center justify-center gap-2 animate-fade-up"},[u(i,{name:"bi-camera-video-fill"}),s[15]||(s[15]=C(" Unirse ahora ",-1))])])):x("",!0)])])]))])]),p("div",Ae,[p("div",ze,[p("h3",Me,[u(i,{name:"fa-user-tie",class:"text-blue-500"}),s[18]||(s[18]=C(" Experto ",-1))]),p("div",_e,[p("div",Re,f(_.data.expertName?_.data.expertName.charAt(0):"E"),1),p("div",Te,[p("h4",Pe,f(_.data.expertName),1),p("p",Ve,"CÃ©dula: "+f(_.data.expertProfessionalId),1)]),p("button",{onClick:Na,class:"text-blue-600 hover:text-blue-700"},[u(i,{name:"fa-external-link-alt",scale:"0.8"})])]),p("div",Oe,[s[19]||(s[19]=p("p",{class:"text-xs text-gray-500"}," CalificaciÃ³n del experto ",-1)),p("div",Xe,[(d(!0),c(v,null,h(_.data.expertRating,(e,a)=>(d(),w(i,{class:"text-yellow-400",key:a,name:"bi-star-fill",scale:"0.7"}))),128))])]),_.data.isFinished&&b(y)().getIsClient?(d(),c("div",{key:0,onClick:Ia,class:"mt-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-4 text-white cursor-pointer hover:shadow-lg transition-shadow relative overflow-hidden group"},[p("div",qe,[u(i,{name:"fa-user-tie",scale:"5"})]),p("div",He,[p("div",Ge,[u(i,{name:"fa-briefcase"})]),s[20]||(s[20]=p("div",{class:"flex-1"},[p("p",{class:"font-bold text-sm"},"Â¿Le gustÃ³ el servicio?"),p("p",{class:"text-xs text-blue-100"},"Contratae una asesorÃ­a completa")],-1)),u(i,{name:"fa-chevron-right",scale:"0.8",class:"group-hover:translate-x-1 transition-transform"})])])):x("",!0)]),_.data.isCanceled?(d(),c("div",Ye,[p("h3",Je,[u(i,{name:"fa-info-circle"}),s[21]||(s[21]=C(" CancelaciÃ³n ",-1))]),p("div",Ke,[p("p",We,[s[22]||(s[22]=p("span",{class:"font-semibold"},"Motivo:",-1)),C(" "+f(_.data.cancelationReason),1)]),p("p",Ze,[s[23]||(s[23]=p("span",{class:"font-semibold"},"Cancelado por:",-1)),C(" "+f(_.data.canceledByName),1)]),p("p",Qe,[s[24]||(s[24]=p("span",{class:"font-semibold"},"Fecha:",-1)),C(" "+f(null===(o=_.data.canceledAt)||void 0===o?void 0:o.toDate().toLocaleString("es-MX")),1)])])])):x("",!0)])]),_.data.isFinished||_.data.isCanceled?x("",!0):(d(),c("div",ea,[_.data.acceptedByExpert&&b(y)().getIsExpert?(d(),c("button",{key:0,onClick:ha,class:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 px-4 rounded-xl transition-colors shadow-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:ya.value},[u(i,{name:"bi-calendar-check"}),C(" "+f(ya.value?va.value:"Marcar como Finalizada"),1)],8,aa)):x("",!0),!_.data.acceptedByExpert||_.data.acceptedByExpert&&!ya.value?(d(),c("button",{key:1,onClick:Ua,class:"flex-1 bg-white border border-rose-200 text-rose-600 hover:bg-rose-50 font-semibold py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2"},[u(i,{name:"bi-calendar-x-fill"}),s[25]||(s[25]=C(" Cancelar Cita ",-1))])):x("",!0),p("button",{class:"flex-1 bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100 font-semibold py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2",onClick:s[0]||(s[0]=e=>b(a).push("/help"))},[u(i,{name:"md-supportagent-outlined"}),s[26]||(s[26]=C(" Reportar Problema ",-1))])]))])])),u(R,{show:t.value,"onUpdate:show":s[2]||(s[2]=e=>t.value=e),title:"Cancelar Cita",confirmText:"Confirmar CancelaciÃ³n",onConfirm:Da},{default:F(()=>[p("div",ta,[s[27]||(s[27]=p("p",{class:"text-sm text-gray-500"},"Por favor, indique el motivo de la cancelaciÃ³n:",-1)),k(p("textarea",{"onUpdate:modelValue":s[1]||(s[1]=e=>Ea.value=e),class:"w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-sm",rows:"3",placeholder:"Escribe el motivo aquÃ­..."},null,512),[[E,Ea.value]])])]),_:1},8,["show"]),u(R,{show:j.value,"onUpdate:show":s[3]||(s[3]=e=>j.value=e),title:"Calificar servicio",confirmText:"Enviar CalificaciÃ³n",onConfirm:Ca},{default:F(()=>[p("div",sa,[p("p",la,[s[28]||(s[28]=C(" Â¿CÃ³mo calificarÃ­as tu experiencia con ",-1)),p("span",ra,f(b(y)().getIsExpert?_.data.userName:_.data.expertName),1),s[29]||(s[29]=C("? ",-1))]),p("div",oa,[(d(),c(v,null,h([5,4,3,2,1],e=>p("button",{key:e,onClick:a=>L.value=e,class:m(["w-full flex items-center justify-between p-4 rounded-xl border-2 transition-all cursor-pointer group",L.value===e?"border-blue-500 bg-blue-50/50":"border-gray-100 hover:border-blue-200 bg-white"])},[p("span",{class:m(["font-bold text-sm",L.value===e?"text-blue-600":"text-gray-600"])},f(e)+" Estrellas",3),p("div",na,[(d(!0),c(v,null,h(e,e=>(d(),w(i,{key:e,name:"bi-star-fill",class:"text-yellow-400"}))),128))])],10,ia)),64))])])]),_:1},8,["show"])])}}}),[["__scopeId","data-v-f75ca20a"]]),da={class:"web-page min-h-screen bg-gradient-to-br from-blue-50 via-blue-50/50 to-white"},ua={class:"mt-28"},pa={class:"web-toolbar h-16 flex items-center px-4 mt-2"},ga={class:"relative w-full"},xa={class:"web-toolbar h-auto flex flex-col sm:flex-row items-center px-4 gap-3 mb-4"},ma={class:"flex-1 w-full flex flex-row gap-2"},fa={class:"flex px-4 py-2 gap-2"},ba=["onClick"],ya={class:"animate-fade-in"},va={class:"text-center px-4 py-2 flex items-center gap-2 justify-center bg-gray-50 mb-2 rounded-xl mx-4"},ha={class:"font-poppins text-sm font-semibold text-slate-600"},wa={class:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"},Ca={key:0,class:"flex flex-col items-center justify-center p-8 text-center text-gray-500 font-poppins bg-white mx-4 rounded-xl border border-dashed border-gray-200"},Fa={class:"px-4 space-y-3 pb-4"},ka={class:"animate-fade-in"},Ea={class:"text-center px-4 py-2 flex items-center gap-2 justify-center bg-gray-50 mb-2 rounded-xl mx-4"},Ua={class:"font-poppins text-sm font-semibold text-slate-600"},Da={class:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"},Na={key:0,class:"flex flex-col items-center justify-center p-8 text-center text-gray-500 font-poppins bg-white mx-4 rounded-xl border border-dashed border-gray-200"},$a={class:"px-4 space-y-3 pb-4"},Ia={class:"animate-fade-in"},Sa={class:"text-center px-4 py-2 flex items-center gap-2 justify-center bg-gray-50 mb-2 rounded-xl mx-4"},ja={class:"font-poppins text-sm font-semibold text-slate-600"},La={class:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"},Ba={key:0,class:"flex flex-col items-center justify-center p-8 text-center text-gray-500 font-poppins bg-white mx-4 rounded-xl border border-dashed border-gray-200"},Aa={class:"px-4 space-y-3 pb-4"},za=t({__name:"ClientAppointmentsView",setup(e){const a=y(),t=i(),s=j(t,"schedules"),g=L(s,B("userUid","==",a.getUserUid)),b=l(!1),w=l([]);let F=null;o(()=>{b.value=!0,F=A(g,e=>{w.value=[],e.empty||e.forEach(e=>{const a=e.data();a.docId=e.id,a.docRef=e.ref,a.docRefPath=e.ref.path,w.value.push(a)}),b.value=!1},e=>{console.error(e),b.value=!1})}),z(()=>{F&&(F(),F=null),w.value=[]});const U=[{id:"proximas",label:"PrÃ³ximas"},{id:"finalizadas",label:"Finalizadas"},{id:"canceladas",label:"Canceladas"}],D=l("proximas"),N=l(""),$=l("creation"),I=l("Recientes"),S=e=>{if(e.appointmentDate)return new Date(1e3*e.appointmentDate.seconds);if(!e.createdAt)return null;const a=new Date(1e3*e.createdAt.seconds),t=a.getDay(),s=(e=>{if(!e)return-1;const a=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return["domingo","lunes","martes","miercoles","jueves","viernes","sabado"].findIndex(e=>a.includes(e))})(e.DayName||e.dayName||"");if(-1===s)return a;let l=s-t;l<0&&(l+=7);const r=new Date(a);if(r.setDate(a.getDate()+l),e.expertSchedule&&e.expertSchedule.time){const[a,t]=e.expertSchedule.time.split(":").map(Number);isNaN(a)||isNaN(t)||r.setHours(a,t,0,0)}return r},R=e=>{let a=[...e];if(N.value){const e=N.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");a=a.filter(a=>{const t=(a.expertName||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),s=(a.expertSpecialty||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");let l="programada";return a.isFinished&&(l="finalizada"),a.isCanceled&&(l="cancelada"),!(a.isFinished||a.isCanceled||!e.includes("proxima")&&!e.includes("pendiente"))||t.includes(e)||s.includes(e)||l.includes(e)})}return a.sort((e,a)=>{let t=0,s=0;if("creation"===$.value){var l,r;t=(null===(l=e.createdAt)||void 0===l?void 0:l.seconds)||0,s=(null===(r=a.createdAt)||void 0===r?void 0:r.seconds)||0}else{const l=S(e),r=S(a);t=l?l.getTime():0,s=r?r.getTime():0}return"Recientes"===I.value?s-t:t-s}),a},T=r(()=>{const e=w.value.filter(e=>e.isCanceled);return R(e)}),P=r(()=>{const e=w.value.filter(e=>e.isFinished);return R(e)}),V=r(()=>{const e=w.value.filter(e=>!e.isFinished&&!e.isCanceled);return R(e)});return(e,a)=>{const t=n("v-icon");return d(),c("div",da,[p("div",ua,[p("nav",pa,[p("div",ga,[u(t,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",name:"fa-search"}),k(p("input",{class:"web-search-input w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-100 transition-all font-medium","onUpdate:modelValue":a[0]||(a[0]=e=>N.value=e),placeholder:"Experto, especialidad o estado..."},null,512),[[E,N.value]])])]),p("nav",xa,[p("div",ma,[k(p("select",{class:"web-select w-full p-3 bg-white border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-100 transition-all text-xs font-poppins","aria-label":"Listar por","onUpdate:modelValue":a[1]||(a[1]=e=>$.value=e)},[...a[3]||(a[3]=[p("option",{value:"creation"},"Fecha de CreaciÃ³n",-1),p("option",{value:"scheduled"},"Fecha Agendada",-1)])],512),[[M,$.value]]),k(p("select",{class:"web-select w-full p-3 bg-white border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-blue-100 transition-all text-xs font-poppins","aria-label":"Ordenar por","onUpdate:modelValue":a[2]||(a[2]=e=>I.value=e)},[...a[4]||(a[4]=[p("option",{value:"Recientes"},"MÃ¡s recientes",-1),p("option",{value:"Antiguas"},"MÃ¡s antiguas",-1)])],512),[[M,I.value]])])]),p("div",fa,[(d(),c(v,null,h(U,e=>p("button",{key:e.id,onClick:a=>{return t=e.id,void(D.value=t);var t},class:m(["flex-1 py-2 text-sm font-bold rounded-lg transition-all border border-transparent",D.value===e.id?"bg-white text-blue-600 shadow-sm border-gray-100":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"])},f(e.label),11,ba)),64))]),k(p("div",ya,[p("div",va,[p("p",ha,f(V.value.length)+" PrÃ³ximas citas",1),k(p("div",wa,null,512),[[_,b.value]])]),0===V.value.length?(d(),c("div",Ca,[u(t,{name:"md-eventbusy",scale:"2",class:"mb-2 text-gray-300"}),a[5]||(a[5]=C(" No se encontraron citas prÃ³ximas ",-1))])):x("",!0),p("div",Fa,[(d(!0),c(v,null,h(V.value,(e,a)=>(d(),c("div",{key:e.docId||a},[u(ca,{data:e,index:a},null,8,["data","index"])]))),128))])],512),[[_,"proximas"===D.value]]),k(p("div",ka,[p("div",Ea,[p("p",Ua,f(P.value.length)+" Citas finalizadas ",1),k(p("div",Da,null,512),[[_,b.value]])]),0===P.value.length?(d(),c("div",Na,[u(t,{name:"md-assignmentturnedin",scale:"2",class:"mb-2 text-gray-300"}),a[6]||(a[6]=C(" No se encontraron citas finalizadas ",-1))])):x("",!0),p("div",$a,[(d(!0),c(v,null,h(P.value,(e,a)=>(d(),c("div",{key:e.docId||a},[u(ca,{data:e,index:a},null,8,["data","index"])]))),128))])],512),[[_,"finalizadas"===D.value]]),k(p("div",Ia,[p("div",Sa,[p("p",ja,f(T.value.length)+" Citas canceladas ",1),k(p("div",La,null,512),[[_,b.value]])]),0===T.value.length?(d(),c("div",Ba,[u(t,{name:"md-cancel-outlined",scale:"2",class:"mb-2 text-gray-300"}),a[7]||(a[7]=C(" No se encontraron citas canceladas ",-1))])):x("",!0),p("div",Aa,[(d(!0),c(v,null,h(T.value,(e,a)=>(d(),c("div",{key:e.docId||a},[u(ca,{data:e,index:a},null,8,["data","index"])]))),128))])],512),[[_,"canceladas"===D.value]])])])}}});e("default",X(za,[["__scopeId","data-v-cd78e851"]]))}}});
