import{a as M,i as A,u as B,r as V,b as n,o,x as S,n as D,e,f as c,t as p,q as $,a0 as I,j as z,k as f,l as q,p as N,A as R,F as L,v as O,W as T,w as F,g as j,I as P,G}from"./index-CzULuHlK.js";import{u as Q}from"./expertAdmin-Bn_x8tbD.js";import{u as W}from"./stars-B7JsDl3t.js";import{G as H}from"./GenericModal-BmA4WiXf.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={key:0,class:"absolute top-4 right-4 z-10 px-3 py-1 bg-red-100 text-red-600 text-[10px] font-bold uppercase tracking-wider rounded-full md:hidden animate-pulse"},X={class:"flex flex-col md:flex-row flex-1"},Y={class:"relative mb-5 group-hover:scale-105 transition-transform duration-500"},Z={class:"w-24 h-24 md:w-32 md:h-32 rounded-2xl overflow-hidden shadow-2xl ring-4 ring-white relative"},ee=["src"],te={key:0,class:"absolute inset-0 bg-red-900/20 backdrop-blur-[1px] flex items-center justify-center"},se={class:"space-y-1 w-full"},re={class:"text-xl md:text-2xl font-black text-gray-800 leading-tight font-manrope tracking-tight break-words"},oe={class:"text-blue-600 font-extrabold text-sm tracking-wide uppercase"},ae={class:"mt-5 flex flex-wrap items-center justify-center md:justify-start gap-2.5"},le={key:0,class:"flex items-center gap-1.5 bg-white px-3 py-1.5 rounded-xl shadow-sm border border-gray-100 transition-colors group-hover:border-blue-50"},ne={class:"text-sm font-black text-gray-700"},ie={class:"text-[10px] text-gray-400 font-bold"},de={class:"hidden md:block"},ce={key:0,class:"bg-gray-900 text-white border-gray-900 px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest border"},pe={class:"mt-4 flex items-center gap-2 text-gray-400"},ue={class:"text-[10px] font-bold uppercase tracking-tighter"},xe={class:"flex-1 p-6 md:p-8 flex flex-col justify-between bg-white"},me={class:"space-y-6"},fe={class:"relative"},ge={class:"text-sm text-gray-600 leading-relaxed line-clamp-4 italic bg-gray-50/30 p-4 rounded-2xl border border-gray-50 relative z-10"},be={key:0,class:"p-5 bg-red-50/50 rounded-2xl border border-red-100/50 transition-all hover:bg-red-50"},ve={class:"flex items-center gap-2 mb-2"},he={class:"bg-white/80 p-3 rounded-xl border border-red-100 shadow-sm"},ye={class:"text-sm text-red-700 leading-snug font-medium"},we={class:"grid grid-cols-2 gap-4 mt-8"},_e=M({__name:"ExpertCard",props:{expertData:{type:Object,default:()=>({})}},emits:["reload","callOpenModal"],setup(C,{emit:y}){const t=C,w=y,_=A(),u=B(),g=Q(),{calcStarsValue:b}=W(),m=()=>{g.setExpertData(t.expertData),_.push("/expert-preview")},v=()=>{w("callOpenModal",t.expertData)},x=async()=>{confirm("¿Está seguro de desbloquear a este experto?")&&await h()},h=async()=>{if(!t.expertData.docRef){u.error("Error: No se encontró el experto");return}try{await I(t.expertData.docRef,{isSuspended:!1,suspensionReason:null}),w("reload"),u.success("Experto reactivado exitosamente")}catch(k){console.error("Error reactivating expert:",k),u.error("Error al reactivar al experto")}};return(k,a)=>{var E,r;const d=V("v-icon");return o(),n("div",{class:S(["group relative bg-white rounded-3xl border border-gray-100 shadow-sm hover:shadow-xl hover:border-blue-100 transition-all duration-500 overflow-hidden h-full flex flex-col",{"ring-2 ring-red-100 bg-red-50/40":t.expertData.isSuspended}])},[t.expertData.isSuspended?(o(),n("div",K," Suspendido ")):D("",!0),e("div",X,[e("div",{class:S(["w-full md:w-[38%] p-6 flex flex-col items-center md:items-start text-center md:text-left border-b md:border-b-0 md:border-r border-gray-50 bg-gradient-to-br from-white to-gray-50/30",{"from-red-50/50 to-white":t.expertData.isSuspended}])},[e("div",Y,[e("div",Z,[e("img",{class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",src:t.expertData.imgUrl||"https://picsum.photos/200/300",alt:"Profile picture"},null,8,ee),t.expertData.isSuspended?(o(),n("div",te,[c(d,{name:"ri-error-warning-line",class:"text-white",scale:"1.5"})])):D("",!0)])]),e("div",se,[e("h3",re,p(t.expertData.fullName||"Nombre del experto"),1),e("p",oe,p((E=t.expertData.specialty)!=null?E:"Especialidad"),1)]),e("div",ae,[t.expertData.rating?(o(),n("div",le,[c(d,{name:"io-star",scale:"0.8",class:"text-yellow-400"}),e("span",ne,p($(b)(t.expertData.rating).toFixed(1)),1),e("span",ie,"("+p((r=t.expertData.rating.count)!=null?r:0)+")",1)])):D("",!0),e("div",de,[t.expertData.isBanned?(o(),n("span",ce," Bloqueado ")):(o(),n("span",{key:1,class:S([t.expertData.isSuspended?"bg-red-50 text-red-600 border-red-100":"bg-green-50 text-green-600 border-green-100","px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest border"])},p(t.expertData.isSuspended?"Suspendido":"Activo"),3))])]),e("div",pe,[c(d,{name:"hi-identification",scale:"0.7"}),e("p",ue," ID: "+p(t.expertData.professionalId||"No Registrado"),1)])],2),e("div",xe,[e("div",me,[e("div",null,[a[0]||(a[0]=e("div",{class:"flex items-center gap-2 mb-3"},[e("div",{class:"w-6 h-1 bg-blue-500 rounded-full"}),e("label",{class:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] block"},"Biografía Profesional")],-1)),e("div",fe,[c(d,{name:"ri-zhihu-fill",scale:"1.5",class:"absolute -top-2 -left-2 text-blue-50/50 -z-0"}),e("p",ge,' "'+p(t.expertData.bio||"Este experto aún no ha redactado su biografía profesional.")+'" ',1)])]),t.expertData.isSuspended?(o(),n("div",be,[e("div",ve,[c(d,{name:"ri-error-warning-line",class:"text-red-600",scale:"0.9"}),a[1]||(a[1]=e("span",{class:"text-[10px] font-black text-red-800 uppercase tracking-widest"},"Alerta Administrativa",-1))]),e("div",he,[a[2]||(a[2]=e("p",{class:"text-xs font-bold text-red-900 mb-1"},"Motivo de suspensión:",-1)),e("p",ye,p(t.expertData.suspensionReason||"Incumplimiento de las políticas de la plataforma."),1)])])):D("",!0)]),e("div",we,[t.expertData.isSuspended?(o(),n("button",{key:0,class:"px-5 py-4 bg-white text-emerald-600 border-2 border-emerald-100 rounded-2xl font-black hover:bg-emerald-50 hover:border-emerald-200 transition-all text-sm active:scale-95 shadow-sm flex items-center justify-center gap-2",onClick:x},[c(d,{name:"ri-shield-check-fill",scale:"0.9"}),a[3]||(a[3]=e("span",null,"Reactivar",-1))])):(o(),n("button",{key:1,class:"px-5 py-4 bg-white text-rose-500 border-2 border-rose-50 rounded-2xl font-black hover:bg-rose-50 hover:border-rose-100 transition-all text-sm active:scale-95 shadow-sm flex items-center justify-center gap-2",onClick:v},[c(d,{name:"fa-user-slash",scale:"0.8"}),a[4]||(a[4]=e("span",null,"Suspender",-1))])),e("button",{class:"px-5 py-4 bg-blue-600 text-white rounded-2xl font-black hover:bg-blue-700 hover:shadow-blue-200 transition-all shadow-xl shadow-blue-100 text-sm active:scale-95 flex items-center justify-center gap-2",onClick:m},[a[5]||(a[5]=e("span",null,"Ver Perfil",-1)),c(d,{name:"fa-chevron-right",scale:"0.7"})])])])])],2)}}}),ke={class:"web-page min-h-screen bg-gray-50 flex flex-col w-full"},Ee={class:"sticky top-28 z-40 border-b border-gray-100 shadow-md bg-white rounded-3xl px-12 mx-12"},De={class:"h-16 flex items-center px-4 justify-between"},Se={class:"flex items-center gap-3"},$e={class:"max-w-5xl mx-auto w-full px-4 py-3 bg-gray-50/50"},Ce={class:"relative"},Ne={class:"flex-1 w-full p-4 overflow-y-auto mt-32"},Re={key:0,class:"flex flex-col items-center justify-center py-20 gap-4"},je={key:1,class:"flex flex-col items-center justify-center py-20 gap-4"},Me={key:2,class:"grid gap-4 lg:grid-cols-2"},Ae={class:"space-y-4"},Be={class:"p-4 bg-rose-50 rounded-2xl border border-rose-100"},Ve={class:"text-rose-900 font-medium"},Ie={class:"font-bold"},Ue={class:"space-y-2"},ze=M({__name:"ExpertListAdmin",setup(C){const y=A(),t=B(),w=z(),_=f([]),u=f([]),g=f(!1),b=f(!1),m=f(""),v=f(""),x=f({}),h=async()=>{g.value=!0;try{const r=await P(G(w,"experts"));if(r.empty){t.warning("No hay expertos registrados"),g.value=!1;return}const s=[];r.forEach(i=>{s.push({...i.data(),docId:i.id,docRef:i.ref})}),_.value=s,u.value=s}catch(r){console.error("Error al cargar los expertos:",r),t.error("Error al cargar los expertos: "+r.message)}finally{g.value=!1}},k=r=>{const s=r.toLowerCase();u.value=_.value.filter(i=>[i.fullName,i.professionalId,i.email,i.specialty,i.suspensionReason].some(l=>l==null?void 0:l.toLowerCase().includes(s)))},a=r=>{x.value=r,b.value=!0},d=()=>{m.value="",x.value={},b.value=!1},E=async()=>{if(!m.value.trim()){t.error("Error: No se proporcionó un motivo de suspensión");return}if(!x.value.docRef){t.error("Error: No se encontró el experto");return}try{await I(x.value.docRef,{isSuspended:!0,suspensionReason:m.value.trim()}),t.success("Experto suspendido exitosamente"),await h(),d()}catch(r){console.error("Error suspending expert:",r),t.error("Error al suspender al experto")}};return q(()=>{h()}),(r,s)=>{const i=V("v-icon");return o(),n("div",ke,[e("header",Ee,[e("nav",De,[s[6]||(s[6]=e("h1",{class:"text-xl font-bold text-blue-700 font-manrope"},"Administrar Expertos",-1)),e("div",Se,[e("button",{class:"px-4 py-2 bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-200 hover:bg-blue-700 transition-all active:scale-95 text-sm",onClick:s[0]||(s[0]=l=>$(y).push("/create-expert"))}," Crear Experto "),e("button",{class:"px-4 py-2 bg-gray-100 text-gray-600 font-bold rounded-xl hover:bg-gray-200 transition-all active:scale-95 text-sm",onClick:s[1]||(s[1]=l=>$(y).push("/users-list-admin"))}," Ver Usuarios ")])]),e("div",$e,[e("div",Ce,[c(i,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",name:"fa-search"}),N(e("input",{class:"w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-2xl outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all font-medium text-gray-700 shadow-sm",placeholder:"Buscar por nombre, especialidad, correo...","onUpdate:modelValue":s[2]||(s[2]=l=>v.value=l),onInput:s[3]||(s[3]=l=>k(v.value))},null,544),[[R,v.value]])])])]),e("main",Ne,[g.value?(o(),n("div",Re,[...s[7]||(s[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1),e("p",{class:"text-gray-500 font-medium"},"Cargando expertos...",-1)])])):u.value.length===0?(o(),n("div",je,[c(i,{name:"ri-user-smile-line",scale:"3",class:"text-gray-300"}),s[8]||(s[8]=e("p",{class:"text-gray-500 font-medium"},"No se ha encontrado ningún experto",-1))])):(o(),n("div",Me,[(o(!0),n(L,null,O(u.value,(l,U)=>(o(),T(_e,{key:U,"expert-data":l,onReload:h,onCallOpenModal:a},null,8,["expert-data"]))),128))])),c(H,{show:b.value,"onUpdate:show":s[5]||(s[5]=l=>b.value=l),title:"Suspender Experto",confirmText:"Suspender",onConfirm:E,onCancel:d},{default:F(()=>[e("div",Ae,[e("div",Be,[e("p",Ve,[s[9]||(s[9]=j(" ¿Está seguro de suspender a ",-1)),e("span",Ie,p(x.value.fullName),1),j(" ("+p(x.value.specialty)+")? ",1)])]),e("div",Ue,[s[10]||(s[10]=e("label",{class:"block text-sm font-bold text-gray-700 ml-1"},"Motivo de la suspensión",-1)),N(e("textarea",{class:"w-full h-32 p-4 bg-gray-50 border border-gray-200 rounded-2xl outline-none focus:ring-4 focus:ring-rose-100 focus:border-rose-500 transition-all font-medium text-gray-700 resize-none","onUpdate:modelValue":s[4]||(s[4]=l=>m.value=l),placeholder:"Ej: El experto contactó con el usuario sin permiso"},null,512),[[R,m.value]])])])]),_:1},8,["show"])])])}}}),Pe=J(ze,[["__scopeId","data-v-caeb6fe5"]]);export{Pe as default};
