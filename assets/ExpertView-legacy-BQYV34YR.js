System.register(["./index-legacy-DDuM_xHi.js","./GenericModal-legacy-B6qdP2Yf.js","./index-legacy-CPnhazDU.js","./index-legacy-zK3lQ4Sh.js","./_plugin-vue_export-helper-legacy-BVIICed7.js"],function(e,a){"use strict";var t,l,s,o,i,n,r,c,d,u,p,g,f,m,x,b,v,y,h,w,C,k,F,E,$,D,U,A,I,N,S,_,L,j,B,z,R,T,M,P,V,O;return{setters:[e=>{t=e.a,l=e.k,s=e.Z,o=e.l,i=e.j,n=e.r,r=e.b,c=e.o,d=e.n,u=e.f,p=e.q,g=e.e,f=e.Y,m=e.t,x=e.g,b=e.B,v=e.L,y=e.F,h=e.x,w=e.W,C=e.w,k=e.p,F=e.z,E=e.$,$=e.J,D=e.K,U=e.V,A=e.a0,I=e.a1,N=e.G,S=e.E,_=e.H,L=e.a2,j=e.m,B=e._,z=e.a3,R=e.v,T=e.M},e=>{M=e.G},e=>{P=e.e},e=>{V=e.B},e=>{O=e._}],execute:function(){var a=document.createElement("style");a.textContent=".ios-appointment-section[data-v-77be83bc]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif}.ios-card[data-v-77be83bc]{min-height:130px;transition:all .3s ease}.ios-icon-container[data-v-77be83bc]{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:12px}.ios-title[data-v-77be83bc]{font-size:16px;font-weight:600}.ios-subtitle[data-v-77be83bc]{font-size:14px;margin-top:4px}.ios-meta[data-v-77be83bc]{font-size:12px;margin-top:2px}.ios-status[data-v-77be83bc]{font-size:13px;margin-top:4px}.ios-header[data-v-77be83bc]{border:none;box-shadow:0 2px 8px rgba(0,0,0,.05)}.ios-header-icon[data-v-77be83bc]{box-shadow:0 2px 6px rgba(0,123,255,.2)}.ios-section-title[data-v-77be83bc]{font-size:18px;font-weight:600;padding-left:24px;padding-right:24px}.ios-detail-card[data-v-77be83bc]{box-shadow:0 2px 12px rgba(0,0,0,.06);border:none}.ios-detail-item[data-v-77be83bc]{padding-top:8px;padding-bottom:8px}.ios-detail-icon[data-v-77be83bc]{flex-shrink:0}.ios-actions[data-v-77be83bc]{padding-left:24px;padding-right:24px}.ios-button[data-v-77be83bc]{--border-radius: 12px;--padding-top: 12px;--padding-bottom: 12px;--padding-start: 24px;--padding-end: 24px;font-weight:500}.ripple-parent[data-v-77be83bc]{position:relative;overflow:hidden}.custom-ripple[data-v-77be83bc]{color:#007cdc}\n",document.head.appendChild(a);const G={class:"w-full animate__animated animate__fadeIn animate__faster font-sans text-slate-900"},q={class:"flex flex-col md:flex-row md:items-center gap-5"},X={class:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-4"},H={class:"flex flex-col"},J={class:"text-base font-semibold text-slate-800"},Y={class:"text-sm text-blue-600 font-medium"},Z={class:"flex flex-col border-slate-100 lg:border-l lg:pl-6"},K={class:"flex items-center gap-2 text-slate-700 text-sm"},W={class:"flex items-center gap-2 text-slate-700 text-sm font-medium mt-1"},Q={class:"flex flex-col border-slate-100 lg:border-l lg:pl-6 justify-center"},ee={key:0,class:"inline-flex items-center gap-1.5 py-1 px-3 rounded-full bg-emerald-50 text-emerald-600 text-xs font-bold w-fit"},ae={key:1,class:"inline-flex items-center gap-1.5 py-1 px-3 rounded-full bg-red-50 text-red-600 text-xs font-bold w-fit"},te={key:2,class:"inline-flex items-center gap-1.5 py-1 px-3 rounded-full bg-blue-50 text-blue-600 text-xs font-bold w-fit"},le={key:3,class:"mt-2 flex items-center gap-1"},se={class:"hidden md:flex items-center justify-center pr-2"},oe={class:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors"},ie={key:1,class:"animate__animated animate__fadeIn animate__faster"},ne={class:"flex items-center justify-between mb-6 pb-4 border-b border-slate-100"},re={class:"flex gap-3"},ce={key:0,class:"px-4 py-1.5 rounded-lg bg-red-100 text-red-700 text-xs font-bold"},de={key:1,class:"px-4 py-1.5 rounded-lg bg-green-100 text-green-700 text-xs font-bold"},ue={class:"grid grid-cols-1 xl:grid-cols-12 gap-6"},pe={class:"xl:col-span-8 space-y-6"},ge={class:"bg-gradient-to-r from-slate-900 to-slate-800 rounded-2xl p-8 text-white shadow-lg relative overflow-hidden"},fe={class:"relative z-10"},me={class:"text-blue-400 font-bold text-sm tracking-widest uppercase mb-2"},xe={class:"text-3xl font-bold mb-4"},be={class:"flex flex-wrap gap-6 text-slate-300"},ve={class:"flex items-center gap-2"},ye={class:"flex items-center gap-2"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},we={class:"bg-white border border-slate-100 p-6 rounded-2xl"},Ce={class:"space-y-4"},ke={class:"flex justify-between items-center py-2 border-b border-slate-50"},Fe={class:"font-semibold text-slate-800"},Ee={class:"flex justify-between items-center py-2 border-b border-slate-50"},$e={class:"font-mono text-sm bg-slate-100 px-2 py-1 rounded text-slate-700"},De={class:"flex flex-col gap-2 pt-2"},Ue={key:0,class:"text-yellow-600 font-medium italic"},Ae={class:"bg-white border border-slate-100 p-6 rounded-2xl"},Ie={class:"space-y-4"},Ne={key:0,class:"bg-slate-50 p-4 rounded-xl"},Se={key:0,class:"flex gap-1"},_e={key:1,class:"text-sm p-4 bg-emerald-50 rounded-xl border border-emerald-100"},Le={class:"flex items-center gap-2 text-emerald-700 font-bold mb-1"},je={class:"text-emerald-600 text-xs"},Be={key:2,class:"text-sm p-4 bg-red-50 rounded-xl border border-red-100"},ze={class:"flex items-center gap-2 text-red-700 font-bold mb-1"},Re={class:"text-red-800 italic mt-1 font-medium text-xs"},Te={class:"xl:col-span-4 space-y-6"},Me={key:0,class:"bg-white border border-slate-200 p-6 rounded-2xl shadow-sm"},Pe={class:"flex flex-col gap-3"},Ve={class:"bg-slate-50 p-6 rounded-2xl border border-slate-100 text-slate-500"},Oe={class:"flex items-start gap-3 text-xs leading-relaxed"},Ge={key:0,class:"mt-4 p-3 bg-blue-100/50 rounded-lg text-blue-700 text-[11px] font-medium uppercase"},qe={class:"p-2"},Xe={class:"space-y-3"},He={class:"grid grid-cols-1 gap-2"},Je=["onClick"],Ye={class:"font-bold"},Ze={class:"flex gap-0.5"},Ke={key:2,class:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm"},We={class:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-4"},Qe={class:"font-bold text-slate-800 tracking-tight"},ea=O(t({__name:"CardInfo",props:{data:{type:Object,required:!0},index:{type:Number}},setup(e){const a=l(!1),t=l(!1),N=l(5),S=l(""),_=l([{specialty:"ImportaciÃ³n y ExportaciÃ³n",color:{light:"#E6F3FF",strong:"#0066CC"},icon:"fa-truck-moving",description:"Facilitamos el intercambio de bienes y servicios a nivel internacional con normativas seguras."},{specialty:"MÃ©dico",color:{light:"#E6F7FF",strong:"#0099CC"},icon:"gi-stethoscope",description:"Profesionales de la salud comprometidos en atender tus necesidades mÃ©dicas de forma personalizada."},{specialty:"Contador",color:{light:"#E6FFE6",strong:"#008000"},icon:"bi-calculator-fill",description:"Expertos en contabilidad para gestionar tus finanzas de forma precisa y confiable."},{specialty:"Arquitecto",color:{light:"#F0E6FF",strong:"#6600CC"},icon:"md-architecture-sharp",description:"DiseÃ±o y planificaciÃ³n de espacios con profesionalismo y creatividad."},{specialty:"Servicios Web",color:{light:"#E6F9FF",strong:"#00BFFF"},icon:"md-web",description:"Desarrollo de soluciones digitales a medida para potenciar tu presencia online."},{specialty:"Publicidad",color:{light:"#FFF0E6",strong:"#FF6600"},icon:"ri-newspaper-fill",description:"Estrategias creativas para difundir y potenciar la imagen de tu marca."},{specialty:"Traductores",color:{light:"#FFF8E6",strong:"#FFD700"},icon:"hi-solid-translate",description:"Especialistas en comunicaciÃ³n multilingÃ¼e para romper barreras idiomÃ¡ticas."},{specialty:"Peritaje",color:{light:"#F0E6FF",strong:"#800080"},icon:"gi-sherlock-holmes",description:"Evaluaciones tÃ©cnicas y profesionales con rigor y precisiÃ³n."},{specialty:"IngenierÃ­a en ComputaciÃ³n",color:{light:"#E6FFFA",strong:"#00CED1"},icon:"md-computer-twotone",description:"InnovaciÃ³n tecnolÃ³gica y desarrollo de sistemas a la vanguardia."},{specialty:"GestorÃ­a en TrÃ¡mites",color:{light:"#E6E6FF",strong:"#4B0082"},icon:"ri-newspaper-fill",description:"Optimiza tus gestiones administrativas con asesorÃ­as especializadas."},{specialty:"Marketing",color:{light:"#FFE6F0",strong:"#FF1493"},icon:"ri-marketing-strategy-fill",description:"Conecta con tu audiencia a travÃ©s de estrategias innovadoras y efectivas."},{specialty:"Abogado",color:{light:"#F5E6D3",strong:"#8B4513"},icon:"fa-balance-scale",description:"Conecta con un abogado especializado para recibir asesorÃ­a legal directa y resolver tus asuntos jurÃ­dicos."},{specialty:"PsicÃ³logo/a",color:{light:"#E6E6FF",strong:"#6A5ACD"},icon:"ri-psychotherapy-fill",description:"AsesorÃ­a psicolÃ³gica para resolver tus dudas y resolver tus problemas."},{specialty:"Maestro",color:{light:"#F0FFF0",strong:"#2E8B57"},icon:"gi-teacher",description:"AsesorÃ­a educativa para resolver tus dudas y resolver tus problemas."},{specialty:"Chef",color:{light:"#FFE6E6",strong:"#FF4500"},icon:"gi-chef-toque"}]),L=l(!1),j=l(""),B=e=>{if(O.data.isCanceled)return"#fff0f0";if(O.data.isFinished)return"#f0fff0";if(!O.data.isFinished&&!O.data.isCanceled)return"#f0fbff";const a=_.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.color.light:"#E6E6E6"},z=e=>{if(O.data.isCanceled)return"#ff8080";if(O.data.isFinished)return"#00966A";const a=_.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.color.strong:"#E6E6E6"},R=e=>{const a=_.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.icon:""},T=l(!0),O=e,ea=s(()=>{var e;if(O.data.appointmentDate)return new Date(1e3*O.data.appointmentDate.seconds);if(null===(e=O.data)||void 0===e||!e.createdAt)return null;const a=new Date(1e3*O.data.createdAt.seconds),t=a.getDay(),l=(e=>{const a=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return["domingo","lunes","martes","miercoles","jueves","viernes","sabado"].findIndex(e=>a.includes(e))})(O.data.DayName||O.data.dayName||"");if(-1===l)return a;let s=l-t;s<0&&(s+=7);const o=new Date(a);return o.setDate(a.getDate()+s),o}),aa=s(()=>ea.value?ea.value.toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Fecha no disponible"),ta=s(()=>O.data.expertSchedule.time),la=s(()=>{var e;return(null===(e=ea.value)||void 0===e?void 0:e.toLocaleDateString("es-MX",{weekday:"long"}))||O.data.DayName}),sa=l("card");o(()=>{P.init({blockHeadless:!0,publicKey:"8uRc3wp2ZXACkO_Eb"})});const oa=()=>{T.value?T.value=!1:sa.value="card"===sa.value?"modal":"card"},ia=i(),na=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim(),ra=async()=>{try{L.value=!0,j.value="Cancelando cita...";const e=U.now(),a=$(ia,`experts/${O.data.expertUid}`),t=await D(a);if(!t.exists())return console.log("Could not find the expert document"),L.value=!1,!1;const l=t.data().schedule;console.log(`Expert Data: ${JSON.stringify(l)}`),console.log(`Formatted Day: ${na(la.value)}`);const s=Object.keys(l).find(e=>na(e)==na(la.value));console.log(`Match Day: ${s}`);const o=l[s];console.log(`Expert Schedule Slot: ${o}`);const i=null==o?void 0:o.find(e=>e.takenBy==O.data.userUid);if(console.log(`Slot Match: ${i}`),!i)return console.log("Could not find the expert slot for this appointment"),L.value=!1,!1;if(i.takenBy=null,i.takenAt=null,!O.data.docRef)return console.log("Couldn't find docRef for this document "),L.value=!1,!1;const n=E(ia);n.update(a,{schedule:l}),console.log(`Document doc Ref: ${O.data.docRef}`),n.update($(ia,`schedules/${O.data.docId}`),{isCanceled:!0,cancelationReason:S.value,canceledAt:e,canceledByUid:v().getUserUid||"",canceledByName:v().getUserName||""});const r=`${O.data.expertUid}_${s}_${i.time}`,c=$(ia,"bookings",r);return n.delete(c),console.log(`Guardian deleted: ${r}`),await n.commit(),await(async e=>{try{var a;L.value=!0,j.value="Enviando correo...",P.send("service_q9e8lj2","template_lv5dfds",{headerTitle:"ConsultaExperto.com",greeting:"Se ha cancelado su cita",userName:O.data.userName,headerDescription:"ConfirmaciÃ³n de cancelaciÃ³n de cita",section1Icon:"ðŸ‘¤",section1Title:"InformaciÃ³n del usuario",section1TitleColor:"#007aff",section1Item1Label:"Nombre:",section1Item1Value:O.data.userName,section1Item2Label:"Servicio:",section1Item2Value:O.data.expertSpecialty,section2Icon:"ðŸ“…",section2Title:"Cita cancelada",section2TitleColor:"#ff3b30",section2Subtitle1:"Cita programada para",section2Value1:`â€¢ ${null===(a=ea.value)||void 0===a?void 0:a.toLocaleString("es-MX",{dateStyle:"full"})} a las ${ta.value}hrs`,section2Subtitle2:"Cancelada el",section2Value2:e.toDate().toLocaleString("es-MX",{dateStyle:"full",timeStyle:"long"}),section2HighlightLabel:"Cancelada por:",section2HighlightText:`${v().getUserName},  con motivo: ${S.value||"Motivo no proporcionado"}`,section3Icon:"ðŸ©º",section3Title:"Datos del experto",section3TitleColor:"#8e8e93",section3Item1Label:"Nombre",section3Item1Value:O.data.expertName,section3Item2Label:"CÃ©dula",section3Item2Value:O.data.expertProfessionalId,footerYear:(new Date).getFullYear(),footerLinkUrl:"https://consultaexperto.com",footerLinkText:"consultaexperto.com",footerRightsText:"Todos los derechos reservados.",email:v().getUserEmail}),L.value=!1}catch(t){console.log(t),L.value=!1}})(e),L.value=!1,console.log("Appointment canceled successfully"),!0}catch(e){return console.error("Error in batch function:",e),L.value=!1,!1}},ca=async()=>{try{L.value=!0,j.value="Finalizando cita...";const a=E(ia),t=$(ia,`experts/${O.data.expertUid}`),l=await D(t);if(!l.exists())return console.log("Could not find the expert document"),L.value=!1,!1;const s=l.data().schedule;console.log(`Expert Data: ${JSON.stringify(s)}`),console.log(`Formatted Day: ${na(la.value)}`);const o=Object.keys(s).find(e=>na(e)==na(la.value));console.log(`Match Day: ${o}`);const i=s[o];console.log(`Expert Schedule Slot: ${i}`);const n=null==i?void 0:i.find(e=>e.takenBy==O.data.userUid);if(console.log(`Slot Match: ${n}`),!n)return console.log("Could not find the expert slot for this appointment"),L.value=!1,!1;n.takenBy=null,n.takenAt=null,a.update(t,{schedule:s}),a.update($(ia,`schedules/${O.data.docId}`),{isFinished:!0,finishedAt:U.now(),finishedByExpert:!0,finishedByUid:v().getUserUid||"UID no disponible",finishedByName:v().getUserName||"Nombre no disponible"});const r=$(ia,`users/${O.data.userUid}`);a.update(r,{[`categoryConsultations.${O.data.expertSpecialty}`]:{takenAt:U.now(),hasFreeConsult:!1}});const c=`${O.data.expertUid}_${o}_${n.time}`,d=$(ia,"bookings",c);a.delete(d),console.log(`Guardian deleted: ${c}`),await a.commit(),L.value=!1;try{fa()}catch(e){console.error("Error presenting rating alert",e)}}catch(a){console.error("Error finalizando la cita:",a),L.value=!1}},da=async()=>{try{L.value=!0,j.value="Confirmando cita...";const e=$(ia,`${O.data.docRef.path}`);await A(e,{acceptedByExpert:!0,acceptedAt:U.now(),appointmentLink:`https://meet.greenhost.net/${O.data.expertName}${O.data.userName}${O.data.createdAt.toDate().getTime()}`}),L.value=!1}catch(e){L.value=!1,console.log(`Error in confirming appointment function: ${e}`)}},ua=async()=>{if(O.data.isFinished)console.log("Schedule is already finished");else if(O.data.isCanceled)console.log("Schedule is already canceled");else try{L.value=!0,j.value="Preparando para entrar al link...";const e=$(ia,`${O.data.docRef.path}`);await A(e,{isOpenedLinkByExpert:!0,openedLinkAt:U.now(),consultInCourse:!0}),L.value=!1,V.open({url:O.data.appointmentLink})}catch(e){L.value=!1,console.log(`Error in confirming appointment function: ${e}`)}},pa=()=>{a.value=!0},ga=async()=>{S.value.trim()&&(a.value=!1,await ra())},fa=()=>{t.value=!0},ma=async()=>{try{await xa(N.value),await ba(N.value)}catch(e){console.error("Error updating rating:",e)}t.value=!1},xa=async e=>{if(e<1||e>5)return!1;if(!v().getUserUid||!v().getUserName)return console.log("No user data available"),!1;console.log(`Is user Expert: ${v().getIsExpert}`),console.log(`User UID: ${v().getUserUid}`),console.log(`User Name: ${v().getUserName}`);const a=v().getIsExpert?"users":"experts",t="users"===a?O.data.userUid:O.data.expertUid;let l;try{l=$(ia,`${a}/${t}`),await A(l,{[`rating.stars.${e}`]:I(1),"rating.total":I(e),"rating.count":I(1)}),console.log(`${a} stars updated successfully to user with uid: ${t}`)}catch(s){console.log(`Error trying to update ${a} stars : ${s}`)}},ba=async e=>{if(e<1||e>5)return!1;if(!v().getUserUid||!v().getUserName)return console.log("No user data available"),!1;const a=v().getIsExpert?"Expert":"User";let t;try{t=$(ia,`${O.data.docRef.path}`),await A(t,{[`ratedBy${a}`]:!0,[`consultRatingBy${a}`]:e}),console.log(`${a} consult rating updated successfully to user with uid: ${v().getUserUid}`)}catch(l){console.log(`Error trying to update ${a} consult rating : ${l}`)}};return(e,l)=>{var s,o;const i=n("v-icon");return c(),r("section",G,["card"===sa.value?(c(),r("article",{key:0,onClick:oa,class:p([{"animate__animated animate__fadeInUp animate__faster":T.value&&0===O.index||!T.value},"group relative bg-white border border-slate-200 rounded-xl p-5 hover:border-blue-400 hover:shadow-xl hover:shadow-blue-500/5 transition-all duration-300 cursor-pointer overflow-hidden"])},[g("div",{class:"absolute left-0 top-0 h-full w-1.5",style:f({backgroundColor:z(O.data.expertSpecialty)})},null,4),g("div",q,[g("div",{class:"flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110",style:f({backgroundColor:B(O.data.expertSpecialty)})},[u(i,{name:R(O.data.expertSpecialty),scale:"1.5",style:f({color:z(O.data.expertSpecialty)})},null,8,["name","style"])],4),g("div",X,[g("div",H,[l[3]||(l[3]=g("h4",{class:"text-xs font-bold uppercase tracking-wider text-slate-400 mb-1"},"Paciente / Usuario",-1)),g("span",J,m(O.data.userName),1),g("span",Y,m(O.data.expertSpecialty),1)]),g("div",Z,[l[4]||(l[4]=g("h4",{class:"text-xs font-bold uppercase tracking-wider text-slate-400 mb-1"},"ProgramaciÃ³n",-1)),g("div",K,[u(i,{name:"fa-calendar-alt",scale:"0.7"}),g("span",null,m(aa.value),1)]),g("div",W,[u(i,{name:"fa-clock",scale:"0.7"}),g("span",null,m(ta.value)+" hrs",1)])]),g("div",Q,[O.data.isFinished&&!O.data.isCanceled?(c(),r("div",ee,[...l[5]||(l[5]=[g("span",{class:"relative flex h-2 w-2"},[g("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),g("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})],-1),x(" FINALIZADA ",-1)])])):O.data.isCanceled?(c(),r("div",ae,[u(i,{name:"fa-times-circle",scale:"0.6"}),l[6]||(l[6]=x(" CANCELADA ",-1))])):(c(),r("div",te,[u(i,{name:"fa-calendar-check",scale:"0.6"}),l[7]||(l[7]=x(" PROGRAMADA ",-1))])),b(v)().getIsExpert&&O.data.isFinished?(c(),r("div",le,[(c(!0),r(y,null,h(O.data.consultRatingByExpert,(e,a)=>(c(),w(i,{key:a,name:"bi-star-fill",class:"text-yellow-400",scale:"0.6"}))),128))])):d("",!0)])]),g("div",se,[g("div",oe,[u(i,{name:"fa-chevron-right",scale:"0.8"})])])])],2)):d("",!0),"modal"===sa.value?(c(),r("div",ie,[g("nav",ne,[g("button",{onClick:oa,class:"flex items-center gap-2 text-slate-500 hover:text-blue-600 transition-colors font-medium"},[u(i,{name:"fa-chevron-left",scale:"0.8"}),l[8]||(l[8]=g("span",null,"Volver al listado",-1))]),g("div",re,[O.data.isCanceled?(c(),r("span",ce,"CANCELADA")):d("",!0),O.data.isFinished?(c(),r("span",de,"COMPLETADA")):d("",!0)])]),g("div",ue,[g("div",pe,[g("header",ge,[u(i,{name:"fa-calendar-check",class:"absolute right-[-20px] top-[-20px] opacity-10",scale:"10"}),g("div",fe,[g("p",me,m(O.data.expertSpecialty),1),g("h2",xe,"Consulta con "+m(O.data.userName),1),g("div",be,[g("div",ve,[u(i,{name:"bi-calendar-event-fill",class:"text-blue-400"}),g("span",null,m(aa.value),1)]),g("div",ye,[u(i,{name:"fa-clock",class:"text-blue-400"}),g("span",null,m(ta.value)+" hrs",1)])])])]),g("div",he,[g("section",we,[l[13]||(l[13]=g("h3",{class:"text-slate-400 text-xs font-bold uppercase mb-4 tracking-widest"},"InformaciÃ³n de la Cita",-1)),g("div",Ce,[g("div",ke,[l[9]||(l[9]=g("span",{class:"text-slate-500"},"Agendado por:",-1)),g("span",Fe,m(O.data.userName),1)]),g("div",Ee,[l[10]||(l[10]=g("span",{class:"text-slate-500"},"ID Profesional:",-1)),g("span",$e,m(O.data.expertProfessionalId),1)]),g("div",De,[l[12]||(l[12]=g("span",{class:"text-slate-500"},"Enlace de la sesiÃ³n:",-1)),"En proceso..."==O.data.appointmentLink?(c(),r("div",Ue," En proceso...")):O.data.acceptedByExpert?(c(),r("button",{key:1,onClick:ua,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-blue-200 flex items-center justify-center gap-2"},[u(i,{name:"co-link"}),l[11]||(l[11]=x(" Comenzar Cita ",-1))])):d("",!0)])])]),g("section",Ae,[l[16]||(l[16]=g("h3",{class:"text-slate-400 text-xs font-bold uppercase mb-4 tracking-widest"},"Estado y CalificaciÃ³n",-1)),g("div",Ie,[b(v)().getIsExpert&&!O.data.isCanceled&&O.data.isFinished?(c(),r("div",Ne,[l[15]||(l[15]=g("p",{class:"text-xs text-slate-500 mb-2 uppercase font-bold"},"Tu calificaciÃ³n del paciente:",-1)),O.data.ratedByExpert?(c(),r("div",Se,[(c(!0),r(y,null,h(O.data.consultRatingByExpert,(e,a)=>(c(),w(i,{key:a,name:"bi-star-fill",class:"text-yellow-500"}))),128))])):(c(),r("button",{key:1,onClick:fa,class:"text-sm text-blue-600 font-bold hover:underline flex items-center gap-1"},[l[14]||(l[14]=x(" Calificar ahora ",-1)),u(i,{name:"bi-star-fill",scale:"0.7"})]))])):d("",!0),O.data.isFinished?(c(),r("div",_e,[g("div",Le,[u(i,{name:"fa-user-check"}),x(" Finalizada por "+m(O.data.finishedByName||"Sistema"),1)]),g("p",je,m(null===(s=O.data.finishedAt)||void 0===s?void 0:s.toDate().toLocaleString()),1)])):d("",!0),O.data.isCanceled?(c(),r("div",Be,[g("div",ze,[u(i,{name:"fa-user-times"}),x(" Cancelado por "+m(O.data.canceledByName),1)]),g("p",Re,'"'+m(O.data.cancelationReason)+'"',1)])):d("",!0)])])])]),g("aside",Te,[O.data.isFinished||O.data.isCanceled?d("",!0):(c(),r("div",Me,[l[20]||(l[20]=g("h3",{class:"text-slate-800 font-bold mb-4"},"Acciones de GestiÃ³n",-1)),g("div",Pe,[O.data.acceptedByExpert?d("",!0):(c(),r("button",{key:0,onClick:da,class:"w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2"},[u(i,{name:"bi-calendar-check"}),l[17]||(l[17]=x(" Confirmar Cita ",-1))])),O.data.acceptedByExpert&&!O.data.isFinished?(c(),r("button",{key:1,onClick:ca,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2"},[u(i,{name:"bi-calendar-check"}),l[18]||(l[18]=x(" Finalizar Cita ",-1))])):d("",!0),g("button",{onClick:pa,class:"w-full bg-white border-2 border-rose-100 text-rose-500 hover:bg-rose-50 font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2"},[u(i,{name:"gi-cancel"}),l[19]||(l[19]=x(" Cancelar Cita ",-1))])])])),g("div",Ve,[l[21]||(l[21]=g("h4",{class:"text-xs font-bold uppercase mb-3 tracking-widest"},"Registro de Actividad",-1)),g("div",Oe,[u(i,{name:"fa-info-circle",class:"mt-0.5"}),g("p",null,"Creada el "+m(null===(o=O.data.createdAt)||void 0===o?void 0:o.toDate().toLocaleString("es-MX",{dateStyle:"long",timeStyle:"short"})),1)]),O.data.acceptedByExpert?d("",!0):(c(),r("div",Ge," â“˜ El enlace se generarÃ¡ una vez que aceptes la cita. "))])])])])):d("",!0),u(M,{show:a.value,"onUpdate:show":l[1]||(l[1]=e=>a.value=e),title:"Cancelar Cita",confirmText:"Confirmar CancelaciÃ³n",onConfirm:ga},{default:C(()=>[g("div",qe,[l[22]||(l[22]=g("p",{class:"text-sm text-slate-500 mb-3 font-medium"},"Por favor, indica el motivo de la cancelaciÃ³n:",-1)),k(g("textarea",{"onUpdate:modelValue":l[0]||(l[0]=e=>S.value=e),class:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all",rows:"4",placeholder:"Escribe aquÃ­ el motivo..."},null,512),[[F,S.value]])])]),_:1},8,["show"]),u(M,{show:t.value,"onUpdate:show":l[2]||(l[2]=e=>t.value=e),title:"Calificar servicio",confirmText:"Enviar CalificaciÃ³n",onConfirm:ma},{default:C(()=>[g("div",Xe,[l[23]||(l[23]=g("p",{class:"text-sm text-slate-500 mb-2"},"Selecciona la calificaciÃ³n para el usuario:",-1)),g("div",He,[(c(),r(y,null,h([5,4,3,2,1],e=>g("button",{key:e,onClick:a=>N.value=e,class:p(["flex items-center justify-between p-4 rounded-xl border transition-all",N.value===e?"bg-blue-600 border-blue-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"])},[g("span",Ye,m(e)+" Estrellas",1),g("div",Ze,[(c(!0),r(y,null,h(e,a=>(c(),w(i,{key:a,name:"bi-star-fill",scale:N.value===e?"0.8":"0.7"},null,8,["scale"]))),128))])],10,Je)),64))])])]),_:1},8,["show"]),L.value?(c(),r("div",Ke,[g("div",We,[l[24]||(l[24]=g("div",{class:"w-12 h-12 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"},null,-1)),g("p",Qe,m(j.value),1)])])):d("",!0)])}}}),[["__scopeId","data-v-77be83bc"]]),aa={class:"web-page min-h-screen bg-gray-50"},ta={class:"web-content p-4 space-y-4 mt-28"},la={class:"relative w-full"},sa={class:"flex gap-2"},oa={class:"flex p-1 bg-gray-100 rounded-xl"},ia=["onClick"],na={class:"space-y-4"},ra={class:"flex items-center gap-2 justify-center py-2 text-gray-500 text-sm font-bold bg-gray-50 rounded-lg"},ca={class:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"},da={key:0,class:"flex justify-center items-center py-12 bg-white rounded-2xl border border-dashed border-gray-200 text-gray-400 font-poppins"},ua={class:"space-y-3"};e("default",t({__name:"ExpertView",setup(e){const a=v(),t=l([]),f=l(!1),b=l("Proximas"),w=l(""),C=l("creation"),E=l("Recientes"),D=i();let U=null,A=null;const I=e=>{if(e.appointmentDate)return new Date(1e3*e.appointmentDate.seconds);if(!e.createdAt)return null;const a=new Date(1e3*e.createdAt.seconds),t=a.getDay(),l=(e=>{if(!e)return-1;const a=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return["domingo","lunes","martes","miercoles","jueves","viernes","sabado"].findIndex(e=>a.includes(e))})(e.DayName||e.dayName||"");if(-1===l)return a;let s=l-t;s<0&&(s+=7);const o=new Date(a);return o.setDate(a.getDate()+s),o},M=s(()=>{let e=[...t.value];if("Proximas"===b.value?e=e.filter(e=>!e.isFinished&&!e.isCanceled):"Finalizadas"===b.value?e=e.filter(e=>e.isFinished):"Canceladas"===b.value&&(e=e.filter(e=>e.isCanceled)),w.value){const a=w.value.toLowerCase().trim();e=e.filter(e=>(e.userName||"").toLowerCase().includes(a)||(e.expertSpecialty||"").toLowerCase().includes(a))}return e.sort((e,a)=>{let t=0,l=0;var s,o,i,n;return"creation"===C.value?(t=(null===(s=e.createdAt)||void 0===s?void 0:s.seconds)||0,l=(null===(o=a.createdAt)||void 0===o?void 0:o.seconds)||0):(t=(null===(i=I(e))||void 0===i?void 0:i.getTime())||0,l=(null===(n=I(a))||void 0===n?void 0:n.getTime())||0),"Recientes"===E.value?l-t:t-l}),e}),P=s(()=>M.value);return o(()=>{const e=N(D,"schedules"),l=S(e,_("expertUid","==",a.getUserUid));U=L(l,e=>{t.value=e.docs.map(e=>({...e.data(),docId:e.id,docRef:e.ref}))});const s=$(D,`experts/${a.getUserUid}`);A=L(s,e=>{e.exists()&&T().setExpertData(e.data())})}),j(()=>{U&&U(),A&&A()}),(e,a)=>{const t=n("v-icon");return c(),r("div",aa,[u(B,{pageTitle:"Proximas citas"}),g("main",ta,[g("div",la,[u(t,{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",name:"fa-search"}),k(g("input",{class:"web-search-input w-full pl-12 pr-4 py-3 bg-white border border-gray-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-100 transition-all font-medium","onUpdate:modelValue":a[0]||(a[0]=e=>w.value=e),placeholder:"Usuario, especialidad o estado..."},null,512),[[F,w.value]])]),g("div",sa,[k(g("select",{class:"web-select flex-1 p-3 bg-white border border-gray-200 rounded-xl outline-none text-xs font-poppins","onUpdate:modelValue":a[1]||(a[1]=e=>C.value=e)},[...a[3]||(a[3]=[g("option",{value:"creation"},"Fecha de CreaciÃ³n",-1),g("option",{value:"scheduled"},"Fecha Agendada",-1)])],512),[[z,C.value]]),k(g("select",{class:"web-select flex-1 p-3 bg-white border border-gray-200 rounded-xl outline-none text-xs font-poppins","onUpdate:modelValue":a[2]||(a[2]=e=>E.value=e)},[...a[4]||(a[4]=[g("option",{value:"Recientes"},"MÃ¡s recientes",-1),g("option",{value:"Antiguas"},"MÃ¡s antiguas",-1)])],512),[[z,E.value]])]),g("div",oa,[(c(),r(y,null,h(["Proximas","Finalizadas","Canceladas"],e=>g("button",{class:p(["flex-1 py-2 text-sm font-bold rounded-lg transition-all",b.value===e?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"]),key:e,onClick:a=>b.value=e},m(e),11,ia)),64))]),g("div",na,[g("div",ra,[x(m(P.value.length)+" Citas "+m(b.value.toLowerCase())+" ",1),k(g("div",ca,null,512),[[R,f.value]])]),0===P.value.length?(c(),r("div",da," No se encontraron citas ")):d("",!0),g("div",ua,[(c(!0),r(y,null,h(P.value,(e,a)=>(c(),r("div",{key:e.docId||a},[u(ea,{data:e,index:a},null,8,["data","index"])]))),128))])])])])}}}))}}});
