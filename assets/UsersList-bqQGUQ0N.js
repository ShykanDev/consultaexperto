import{a as $,k as _,N as C,O as R,j,r as L,b as l,o,n as p,e,f,t as g,x as m,F as D,v as I,p as k,A as U,J as B,a1 as E,V as N,G as S,l as G,W as M,I as z}from"./index-kezhufcE.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"web-card bg-white shadow-sm border border-gray-100 rounded-2xl overflow-hidden ios-card group relative transition-all duration-300"},J={key:0,class:"absolute top-0 right-0 p-2 z-10"},P={key:1,class:"p-4"},W={class:"flex items-center gap-3 border-b pb-4"},q={class:"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center text-blue-500"},K={class:"flex flex-col"},Q={class:"text-lg font-bold text-gray-900"},X={class:"text-xs text-gray-500 lowercase"},Y={class:"mt-4 space-y-3"},Z={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl"},ee={class:"flex flex-col text-sm"},te={class:"font-semibold text-gray-700"},se={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl"},oe={class:"flex flex-col text-sm"},ne={class:"mt-4 p-4 bg-blue-50/50 rounded-2xl border border-blue-100"},ae={class:"flex items-center justify-between mb-2"},le={key:0,class:"space-y-2 mt-2"},re={class:"flex items-center justify-between"},ie={class:"text-sm font-bold text-gray-700"},de=["onClick"],ce={class:"p-5 bg-slate-50"},ue={class:"flex justify-between items-center mb-4"},be={class:"space-y-4"},xe={class:"space-y-1"},pe={class:"space-y-1"},fe={class:"flex gap-2"},ge={key:0,class:"mt-2"},ve=$({__name:"UserListCard",props:{user:{}},emits:["userUpdated"],setup(u,{emit:b}){const r=u,v=b,i=_(!1),d=C({...r.user}),s=C({...r.user}),n=_([]);R(()=>r.user,a=>{Object.assign(d,a),i.value||Object.assign(s,a)});function y(){Object.assign(s,d),i.value=!0}function T(){i.value=!1}function h(a){s.isBanned=a}const w=j();function V(){const a=B(w,"users",r.user.userId);E(a,s).then(()=>{i.value=!1,v("userUpdated")}).catch(t=>{console.error("Error updating user:",t)})}function F(){r.user.categoryConsultations&&(n.value=Object.entries(r.user.categoryConsultations))}async function O(a){const t=B(w,"users",r.user.userId);await E(t,{["categoryConsultations.".concat(a,".hasFreeConsult")]:!0,["categoryConsultations.".concat(a,".reactivatedAt")]:N.now()}),v("userUpdated")}return(a,t)=>{const x=L("v-icon");return o(),l("div",H,[i.value?p("",!0):(o(),l("div",J,[e("button",{class:"p-2 text-blue-500 hover:text-blue-600 transition-colors",onClick:y},[f(x,{name:"fa-user-edit",scale:"1.2"})])])),i.value?p("",!0):(o(),l("div",P,[e("div",W,[e("div",q,[f(x,{name:"hi-user",scale:"1.5"})]),e("div",K,[e("h2",Q,g(u.user.name||"Usuario"),1),e("span",X,g(u.user.email),1)])]),e("div",Y,[e("div",Z,[f(x,{class:"text-green-500",name:"fa-phone"}),e("div",ee,[t[4]||(t[4]=e("span",{class:"text-[10px] uppercase font-bold text-gray-400"},"Teléfono",-1)),e("span",te,g(d.phone||"Sin número"),1)])]),e("div",se,[f(x,{name:"ri-error-warning-line",class:m(d.isBanned?"text-red-500":"text-blue-500")},null,8,["class"]),e("div",oe,[t[5]||(t[5]=e("span",{class:"text-[10px] uppercase font-bold text-gray-400"},"Estado",-1)),e("span",{class:m(["font-bold",d.isBanned?"text-red-600":"text-green-600"])},g(d.isBanned?"Suspendido":"Habilitado"),3)])]),e("div",ne,[e("div",ae,[t[6]||(t[6]=e("span",{class:"text-xs font-bold text-gray-800"},"Consultas Gratuitas",-1)),u.user.categoryConsultations?(o(),l("button",{key:0,class:"text-[10px] font-bold text-blue-600",onClick:F},"Ver Detalles")):p("",!0)]),n.value.length>0?(o(),l("div",le,[(o(!0),l(D,null,I(n.value,c=>(o(),l("div",{class:"bg-white p-3 rounded-xl border border-blue-50",key:c[0]},[e("div",re,[e("span",ie,g(c[0]),1),e("button",{class:"text-[10px] bg-blue-600 text-white px-2 py-1 rounded",onClick:we=>O(c[0])},"Reactivar",8,de)])]))),128))])):p("",!0)])])])),e("div",ce,[e("div",ue,[t[7]||(t[7]=e("h3",{class:"text-base font-bold text-gray-800"},"Editar Usuario",-1)),e("button",{class:"text-gray-400 hover:text-gray-600",onClick:T},[f(x,{name:"io-close"})])]),e("div",be,[e("div",xe,[t[8]||(t[8]=e("label",{class:"text-xs font-semibold text-gray-500 ml-1"},"Teléfono",-1)),k(e("input",{class:"w-full px-3 py-2 bg-white border rounded-xl","onUpdate:modelValue":t[0]||(t[0]=c=>s.phone=c),type:"tel"},null,512),[[U,s.phone]])]),e("div",pe,[t[9]||(t[9]=e("label",{class:"text-xs font-semibold text-gray-500 ml-1"},"Estado",-1)),e("div",fe,[e("button",{class:m(["flex-1 py-2 text-xs font-bold rounded-lg border transition-all",s.isBanned?"bg-gray-100 text-gray-400":"bg-white text-green-600 border-green-200"]),onClick:t[1]||(t[1]=c=>h(!1))},"Habilitado",2),e("button",{class:m(["flex-1 py-2 text-xs font-bold rounded-lg border transition-all",s.isBanned?"bg-white text-red-600 border-red-200":"bg-gray-100 text-gray-400"]),onClick:t[2]||(t[2]=c=>h(!0))},"Suspendido",2)]),s.isBanned?(o(),l("div",ge,[k(e("input",{class:"w-full px-3 py-2 border rounded-xl text-sm","onUpdate:modelValue":t[3]||(t[3]=c=>s.banReason=c),placeholder:"Motivo de suspensión"},null,512),[[U,s.banReason]])])):p("",!0)]),e("button",{class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl text-sm mt-4 shadow-lg shadow-blue-200",onClick:V}," Guardar Cambios ")])])])}}}),me={class:"web-page min-h-screen bg-gray-50"},_e={class:"web-content overflow-y-auto font-poppins mt-28"},ye={class:"web-list divide-y divide-gray-100"},he=$({__name:"UsersList",setup(u){const b=_([]),r=j(),v=S(r,"users"),i=()=>{b.value=[],z(v).then(d=>{d.forEach(s=>{const n=s.data();n.docId=s.id,n.docRef=s.ref,b.value.push(n)})})};return G(()=>{i()}),(d,s)=>(o(),l("div",me,[e("section",_e,[e("div",ye,[(o(!0),l(D,null,I(b.value,n=>(o(),M(ve,{key:n.userId,user:n,onUserUpdated:s[0]||(s[0]=y=>i())},null,8,["user"]))),128))])])]))}}),Ue=A(he,[["__scopeId","data-v-f6949b5d"]]);export{Ue as default};
