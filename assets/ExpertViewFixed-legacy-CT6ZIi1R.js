System.register(["./index-legacy-DpLLrPhQ.js","./expertUi-legacy-WLKdNLjs.js","./index-legacy-CPnhazDU.js","./stars-legacy-um4h9HOd.js","./hiring-legacy-Am8vmL3d.js","./_plugin-vue_export-helper-legacy-BVIICed7.js"],function(e,t){"use strict";var a,l,s,i,r,n,o,d,c,u,v,p,b,x,g,f,m,h,y,w,k,U,C,B,j,E,_,A,D,N,S,$,F,I,M;return{setters:[e=>{a=e.a,l=e.k,s=e.u,i=e.Z,r=e.i,n=e.L,o=e.j,d=e.l,c=e.m,u=e.r,v=e.b,p=e.o,b=e.e,x=e.n,g=e.c,f=e.f,m=e.w,h=e.g,y=e.t,w=e.X,k=e.q,U=e.F,C=e.v,B=e.x,j=e.W,E=e.J,_=e.G,A=e.a4,D=e.V,N=e.a2},e=>{S=e.u},e=>{$=e.e},e=>{F=e.u},e=>{I=e.u},e=>{M=e._}],execute:function(){var t=document.createElement("style");t.textContent=".scrollbar-hide[data-v-5cc0b2fc]::-webkit-scrollbar{display:none}.scrollbar-hide[data-v-5cc0b2fc]{-ms-overflow-style:none;scrollbar-width:none}.bg-white\\/20[data-v-5cc0b2fc]{background-color:rgba(255,255,255,.2)}.rounded-3xl[data-v-5cc0b2fc]{border-radius:1.5rem}.transition-all[data-v-5cc0b2fc]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}\n",document.head.appendChild(t);const O={class:"min-h-screen bg-[#F8FAFC] pb-10 font-manrope"},H={class:"px-4 sm:px-6 lg:px-8 pt-28 mt-5"},L={key:0,class:"animate-pulse space-y-8"},P={key:1,class:"space-y-2"},V={key:0,class:"bg-blue-50 border-l-4 border-blue-600 p-6 rounded-2xl shadow-sm flex flex-col md:flex-row items-center justify-between gap-6"},q={class:"flex items-start gap-4"},T={class:"p-3 bg-blue-100 rounded-xl text-blue-600"},z={class:"text-blue-700 text-sm mt-1"},J={class:"font-bold underline"},R={class:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start"},X={class:"lg:col-span-4 space-y-6"},Y={class:"rounded-[2.5rem] shadow-xl shadow-slate-200/50 overflow-hidden border border-slate-100 group"},Z={class:"p-8 text-center"},G={class:"relative group inline-block mb-6"},K={class:"w-32 h-32 rounded-[2rem] overflow-hidden ring-4 ring-offset-4 ring-blue-500 transition-all group-hover:scale-105"},W=["src","alt"],Q={class:"text-2xl font-extrabold text-slate-800 tracking-tight"},ee={class:"text-blue-600 font-semibold text-sm mt-1 uppercase tracking-wider"},te={key:0,class:"mt-2 inline-flex items-center px-3 py-1 rounded-full bg-red-50 text-red-600 text-xs font-bold border border-red-100"},ae={class:"mt-6 flex items-center justify-center gap-2 bg-slate-50 rounded-2xl py-3 px-4"},le={class:"flex items-center gap-1"},se={class:"text-xl font-bold text-slate-800"},ie={class:"text-xs text-slate-500 font-medium"},re={class:"border-t border-slate-100 bg-slate-50/50 p-6 space-y-4"},ne={class:"flex items-center justify-between"},oe={class:"text-sm font-semibold text-slate-700"},de={class:"flex items-center justify-between"},ce={class:"text-sm font-semibold text-slate-700"},ue={class:"flex items-center justify-between"},ve={class:"text-sm font-semibold text-slate-700"},pe={class:"flex items-center justify-between flex-col"},be={class:"text-sm font-semibold text-slate-700"},xe={class:"bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100 grid grid-cols-2 gap-4"},ge={class:"p-4 bg-blue-50 rounded-2xl text-center"},fe={class:"text-2xl font-bold text-blue-700"},me={class:"p-4 bg-blue-50 rounded-2xl text-center"},he={class:"text-2xl font-bold text-blue-700"},ye={class:"text-[10px] font-bold text-blue-600/70 uppercase"},we={class:"lg:col-span-8 space-y-8"},ke={class:"bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden"},Ue={class:"p-8 pb-0 flex flex-col sm:flex-row sm:items-center justify-between gap-4"},Ce={class:"flex items-center gap-3"},Be={class:"p-2.5 bg-blue-600 rounded-xl text-white shadow-lg shadow-blue-200"},je={key:0,class:"flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-xl border border-blue-100 ring-1 ring-blue-100"},Ee={class:"text-xs font-bold"},_e={class:"p-4"},Ae={key:0,class:"flex overflow-x-auto gap-6 pb-2 scrollbar-hide"},De={class:"text-center py-2 bg-slate-50 rounded-xl border border-slate-100 text-blue-700 font-bold text-sm"},Ne={class:"space-y-3"},Se=["onClick","disabled"],$e={class:"text-[9px] uppercase tracking-widest opacity-80"},Fe={key:1,class:"text-center py-12 bg-slate-50 rounded-[2rem] border-2 border-dashed border-slate-200"},Ie={key:0,class:"bg-gradient-to-r from-blue-700 to-blue-700 p-6 flex flex-col md:flex-row items-center justify-between gap-6"},Me={class:"flex items-center gap-4"},Oe={class:"p-3 bg-white/20 rounded-2xl text-white backdrop-blur-md"},He={class:"text-white font-bold text-lg md:text-xl"},Le=["disabled"],Pe={key:0,class:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-blue-900/40 backdrop-blur-sm transition-all"},Ve={class:"relative"},qe={class:"absolute inset-0 flex items-center justify-center"},Te={class:"mt-4 text-white font-bold text-lg tracking-wide"};e("default",M(a({__name:"ExpertViewFixed",setup(e){const{calcStarsValue:t}=F(),a=l(!1),M=l(""),ze=s(),Je=l(!1),Re={Domingo:0,Lunes:1,Martes:2,Miercoles:3,"Miércoles":3,Jueves:4,Viernes:5,Sabado:6,"Sábado":6},Xe=i(()=>{var e;const t=null===(e=rt.value)||void 0===e?void 0:e.schedule,a={};return["Lunes","Martes","Miercoles","Jueves","Viernes","Sábado"].forEach(e=>{null!=t&&t[e]&&(a[e]=t[e])}),a}),Ye=r(),Ze=n(),Ge=l(null),Ke=(e,t)=>{const a=Re[e];if(void 0===a)throw new Error("Día inválido");const[l,s]=t.trim().split(":").map(Number),i=new Date,r=a-i.getDay(),n=new Date(i);return n.setDate(i.getDate()+r),n.setHours(l,s,0,0),n<=i&&n.setDate(n.getDate()+7),n},We=e=>{const t=new Date;return e.getTime()-t.getTime()>=864e5},Qe=(e,t)=>{if(at.value)return void ze.warning("No puede agendar horarios si ya tiene citas agendadas");if(!Ze.getIsAuth&&(Ye.push("/login"),1))return;const a=Xe.value[e];if(!a)return;const l=a.find(e=>e.time===t);if(!l)return;if(l.isAvailable)return void ze.warning(`El horario de las ${l.time} no está disponible`);if(null!=l.takenBy&&l.takenBy!=n().getUserUid)return void ze.warning(`El horario de las ${l.time} ya está tomado por otro usuario`);if(l.takenBy==n().getUserUid&&null!=l.takenAt)return void ze.warning(`El horario de las ${l.time} ya está tomado por usted`);let s;try{if(s=Ke(e,l.time),!We(s))return void ze.warning("No es posible agendar con menos de 24 horas de anticipación.")}catch(r){return void ze.error("Error al calcular fecha de cita")}const i=Object.values(Xe.value).flat(1).find(e=>e.takenBy==n().getUserUid&&!e.takenAt);if(i&&i!==l&&(i.takenBy=null),l.takenBy==n().getUserUid)l.takenBy=null,Ge.value=null,st.value=null;else{l.takenBy=n().getUserUid,Ge.value=l;const e={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},t=s.toLocaleDateString("es-ES",e);st.value=t.charAt(0).toUpperCase()+t.slice(1)}},et=o(),tt=async()=>{var e,t,l,s;if(!Ge.value)return void ze.warning("No se ha seleccionado ningún horario");if(null!==(e=rt.value)&&void 0!==e&&e.isSuspended||null!==(t=rt.value)&&void 0!==t&&t.isBanned)return void ze.error("No puede agendar horarios con este experto.");if(at.value)return void ze.error("Ya tiene una cita agendada.");const i=Object.keys(Xe.value).find(e=>Xe.value[e].includes(Ge.value));if(!i)return;const r=Ke(i,Ge.value.time);if(!We(r))return void ze.error("Mínimo 24 horas de anticipación requeridas.");a.value=!0,M.value="Asegurando tu cita...",Je.value=!0;const o=`${null===(l=rt.value)||void 0===l?void 0:l.userUid}_${i}_${Ge.value.time}`,d=E(et,"bookings",o),c=E(et,`experts/${null===(s=rt.value)||void 0===s?void 0:s.userUid}`),u=E(_(et,"schedules"));try{await A(et,async e=>{var t,a,l,s,o;const v=await e.get(d),p=await e.get(c);if(v.exists())throw new Error("Este horario ya fue reservado.");if(!p.exists())throw new Error("El experto no existe.");const b=(null===(t=p.data())||void 0===t?void 0:t.schedule)||{},x=(b[i]||[]).find(e=>e.time===Ge.value.time);if(!x||x.takenBy&&x.takenBy!==n().getUserUid)throw new Error("El horario ya no está disponible.");x.takenBy=n().getUserUid,x.takenAt=D.now(),e.set(d,{reserverUid:n().getUserUid,createdAt:D.now()}),e.update(c,{schedule:b}),e.set(u,{userName:n().getUserName,userUid:n().getUserUid,expertUid:null===(a=rt.value)||void 0===a?void 0:a.userUid,expertName:null===(l=rt.value)||void 0===l?void 0:l.fullName,expertSchedule:Ge.value,expertSpecialty:null===(s=rt.value)||void 0===s?void 0:s.specialty,expertProfessionalId:null===(o=rt.value)||void 0===o?void 0:o.professionalId,appointmentLink:"",isFinished:!1,dayName:i,appointmentDate:D.fromDate(r),createdAt:D.now(),acceptedByExpert:!1})}),ze.success("¡Cita agendada con éxito!"),setTimeout(()=>Ye.push("/appointments"),1500)}catch(v){ze.error(v.message||"Error al agendar la cita."),Je.value=!1,a.value=!1,Ge.value&&(Ge.value.takenBy=null)}},at=l(!1),lt=l(""),st=l(null),it=l(!1),rt=l(null);let nt;const ot=async()=>{const e=S().getExpertUid;if(!e)return it.value=!0,!1;const t=E(et,`experts/${e}`);nt=N(t,e=>{e.exists()?(rt.value=e.data(),(()=>{var e;const t=null===(e=rt.value)||void 0===e?void 0:e.schedule;if(at.value=!1,lt.value="",t)for(const[a,l]of Object.entries(t)){const e=l.find(e=>e.takenBy==n().getUserUid&&e.takenAt);if(e){at.value=!0,lt.value=`${a} a las ${e.time}`;break}}})(),it.value=!0):ze.error("No se encontró al experto")})};d(async()=>{await ot(),$.init({blockHeadless:!0,publicKey:"8uRc3wp2ZXACkO_Eb"})}),c(()=>{nt&&nt()});const dt=e=>{if(!e)return!1;const t=n().getUserData;if(null==t||!t.categoryConsultations)return!0;const a=t.categoryConsultations[e];return!a||a.hasFreeConsult},ct=I(),ut=()=>{rt.value&&(ct.setExpertHiringData(rt.value.fullName,rt.value.specialty,rt.value.userUid),Ye.push("/hiring"))};return(e,l)=>{var s,i,r,o,d,c,E,_,A,D,N,S,$,F,I,ze;const Re=u("v-icon");return p(),v("div",O,[b("main",H,[it.value?(p(),v("div",P,[f(w,{"enter-active-class":"animate__animated animate__fadeInDown"},{default:m(()=>{var e,t;return[dt(null===(e=rt.value)||void 0===e?void 0:e.specialty)?x("",!0):(p(),v("div",V,[b("div",q,[b("div",T,[f(Re,{name:"ri-error-warning-line",scale:"1.5",animation:"ring"})]),b("div",null,[l[3]||(l[3]=b("h4",{class:"text-blue-900 font-bold text-lg"},"Citas gratuitas agotadas",-1)),b("p",z,[l[1]||(l[1]=h(" Has completado tus citas gratuitas en la categoría ",-1)),b("span",J,y(null===(t=rt.value)||void 0===t?void 0:t.specialty),1),l[2]||(l[2]=h(". Contrata al experto para continuar con tu asesoría profesional. ",-1))])])]),b("button",{onClick:ut,class:"w-full md:w-auto px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-2xl shadow-lg shadow-blue-200 transition-all flex items-center justify-center gap-2 group"},[l[4]||(l[4]=b("span",null,"Contratar Ahora",-1)),f(Re,{name:"bi-person-badge",class:"group-hover:translate-x-1 transition-transform"})])]))]}),_:1}),b("div",R,[b("aside",X,[b("div",Y,[b("div",Z,[b("div",G,[l[5]||(l[5]=b("div",{class:"absolute z-10 bottom-0 opacity-0 group-hover:animate-fade-up group-hover:opacity-100 min-w-40 left-36 bg-white ring-[1px] ring-blue-500 text-blue-600 flex items-center justify-center rounded-lg p-2"},[b("p",{class:"text-xs font-quicksand"},"Este experto esta verificado por el equipo de Consulta Experto")],-1)),b("div",K,[b("img",{class:"w-full h-full object-cover",src:(null===(s=rt.value)||void 0===s?void 0:s.imgUrl)||"https://ui-avatars.com/api/?name="+(null===(i=rt.value)||void 0===i?void 0:i.fullName)+"&background=0D8ABC&color=fff",alt:null===(r=rt.value)||void 0===r?void 0:r.fullName},null,8,W)]),f(Re,{class:"absolute -bottom-2 -right-2 bg-blue-500 text-white w-10 h-10 p-1 rounded-full border-4 border-white shadow-sm",name:"ri-shield-check-fill",scale:"0.7"})]),b("h1",Q,y(null===(o=rt.value)||void 0===o?void 0:o.fullName),1),b("p",ee,y(null===(d=rt.value)||void 0===d?void 0:d.specialty),1),null!==(c=rt.value)&&void 0!==c&&c.isSuspended?(p(),v("div",te,[f(Re,{name:"ri-error-warning-line",scale:"0.8",class:"mr-1"}),l[6]||(l[6]=h(" Suspendido ",-1))])):x("",!0),b("div",ae,[b("div",le,[f(Re,{name:"io-star",class:"text-yellow-500",scale:"1.1"}),b("span",se,y(k(t)(null===(E=rt.value)||void 0===E?void 0:E.rating).toFixed(1)),1)]),l[7]||(l[7]=b("div",{class:"h-4 w-px bg-slate-200"},null,-1)),b("span",ie,y(null===(_=rt.value)||void 0===_||null===(_=_.rating)||void 0===_?void 0:_.count)+" Calificaciones",1)])]),b("div",re,[b("div",ne,[l[8]||(l[8]=b("span",{class:"text-xs font-bold text-slate-400 uppercase"},"Cédula Profesional",-1)),b("span",oe,y((null===(A=rt.value)||void 0===A?void 0:A.professionalId)||"No registrada"),1)]),b("div",de,[l[9]||(l[9]=b("span",{class:"text-xs font-bold text-slate-400 uppercase"},"Años de Exp.",-1)),b("span",ce,y((null===(D=rt.value)||void 0===D?void 0:D.experienceYears)||"10+")+" años",1)]),b("div",ue,[l[10]||(l[10]=b("span",{class:"text-xs font-bold text-slate-400 uppercase"},"Cédula Profesional",-1)),b("span",ve,y((null===(N=rt.value)||void 0===N?void 0:N.professionalId)||"No registrada"),1)]),b("div",pe,[l[11]||(l[11]=b("span",{class:"text-xs font-bold text-slate-400 uppercase"},"Resúmen",-1)),b("span",be,y((null===(S=rt.value)||void 0===S?void 0:S.bio)||"No registrado"),1)])])]),b("div",xe,[b("div",ge,[b("div",fe,y((null===($=rt.value)||void 0===$||null===($=$.rating)||void 0===$?void 0:$.count)||0)+"+",1),l[12]||(l[12]=b("div",{class:"text-[10px] font-bold text-blue-600/70 uppercase"},"Consultas",-1))]),b("div",me,[b("div",he,y(k(t)(null===(F=rt.value)||void 0===F?void 0:F.rating).toFixed(1)),1),b("div",ye,"Extrellas ("+y(null===(I=rt.value)||void 0===I||null===(I=I.rating)||void 0===I?void 0:I.count)+" calificaciones)",1)])])]),b("section",we,[b("div",ke,[b("div",Ue,[b("div",Ce,[b("div",Be,[f(Re,{name:"bi-calendar-check"})]),l[13]||(l[13]=b("div",null,[b("h2",{class:"text-xl font-bold text-slate-800"},"Agenda de Citas"),b("p",{class:"text-slate-400 text-sm font-medium"},"Selecciona un horario disponible")],-1))]),at.value?(p(),v("div",je,[f(Re,{class:"animate-bounce",name:"bi-calendar",scale:"1.4"}),b("span",Ee,"Tiene una cita agendada para el "+y(lt.value),1)])):x("",!0)]),b("div",_e,[dt(null===(ze=rt.value)||void 0===ze?void 0:ze.specialty)?(p(),v("div",Ae,[(p(!0),v(U,null,C(Xe.value,(e,t)=>(p(),v("div",{key:t,class:"flex-shrink-0 w-48 space-y-4"},[b("div",De,y(t),1),b("div",Ne,[(p(!0),v(U,null,C(e,(e,a)=>(p(),v("button",{key:a,onClick:a=>Qe(t,e.time),disabled:e.isAvailable||null!=e.takenBy&&e.takenBy!==k(n)().getUserUid,class:B(["w-full py-3 px-2 rounded-2xl text-sm font-bold transition-all duration-300 transform active:scale-95 flex flex-col items-center gap-1",e.isAvailable?"bg-slate-50 text-slate-300 border border-slate-100 cursor-not-allowed":"",e.isAvailable||null!=e.takenBy?"":"bg-white text-slate-700 border-2 border-slate-100 hover:border-blue-500 hover:text-blue-600",e.takenBy!==k(n)().getUserUid||e.takenAt?"":"bg-blue-600 text-white border-blue-600 shadow-lg scale-[1.02]",e.takenBy===k(n)().getUserUid&&e.takenAt?"bg-green-500 text-white border-green-500 shadow-lg":"",null!=e.takenBy&&e.takenBy!==k(n)().getUserUid?"bg-slate-100 text-slate-400 border-slate-200 cursor-not-allowed":""])},[h(y(e.time)+" ",1),b("span",$e,[e.isAvailable||null!=e.takenBy?e.takenBy===k(n)().getUserUid?(p(),v(U,{key:1},[h("Seleccionado")],64)):null!=e.takenBy?(p(),v(U,{key:2},[h("Ocupado")],64)):(p(),v(U,{key:3},[h("Indisponible")],64)):(p(),v(U,{key:0},[h("Disponible")],64))])],10,Se))),128))])]))),128))])):(p(),v("div",Fe,[f(Re,{name:"ri-user-smile-line",scale:"3",class:"text-slate-300 mb-4"}),l[14]||(l[14]=b("h3",{class:"text-lg font-bold text-slate-500"},"Ha agotado sus citas gratuitas para esta categoria ",-1)),l[15]||(l[15]=b("p",{class:"text-slate-400 max-w-xs mx-auto text-sm mt-2"},"Para poder continuar con una cita le recomendamos contratar al experto profesional.",-1)),b("button",{onClick:ut,class:"mt-4 px-6 py-2 bg-blue-600 text-white font-bold rounded-2xl hover:bg-blue-700"},"Contratar")]))]),f(w,{"enter-active-class":"animate__animated animate__fadeInUp","leave-active-class":"animate__animated animate__fadeOutDown"},{default:m(()=>[st.value?(p(),v("div",Ie,[b("div",Me,[b("div",Oe,[f(Re,{name:"bi-calendar-check",scale:"1.2"})]),b("div",null,[l[16]||(l[16]=b("p",{class:"text-white/60 text-xs font-bold uppercase tracking-widest"},"Cita Seleccionada",-1)),b("h4",He,y(st.value),1)])]),b("button",{onClick:tt,disabled:Je.value,class:"w-full md:w-auto px-10 py-4 bg-white text-blue-700 hover:bg-blue-50 font-extrabold rounded-2xl shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95 disabled:opacity-50"},[b("span",null,y(Je.value?"Procesando...":"Confirmar Cita Ahora"),1),Je.value?x("",!0):(p(),j(Re,{key:0,name:"hi-paper-airplane"}))],8,Le)])):x("",!0)]),_:1})])])])])):(p(),v("div",L,[...l[0]||(l[0]=[g('<div class="grid grid-cols-1 lg:grid-cols-12 gap-8" data-v-5cc0b2fc><div class="lg:col-span-4 bg-white rounded-3xl p-8 shadow-sm h-96" data-v-5cc0b2fc></div><div class="lg:col-span-8 space-y-6" data-v-5cc0b2fc><div class="bg-white rounded-3xl p-8 shadow-sm h-48" data-v-5cc0b2fc></div><div class="bg-white rounded-3xl p-8 shadow-sm h-96" data-v-5cc0b2fc></div></div></div>',1)])]))]),a.value?(p(),v("div",Pe,[b("div",Ve,[l[17]||(l[17]=b("div",{class:"w-20 h-20 border-4 border-white/20 border-t-white rounded-full animate-spin"},null,-1)),b("div",qe,[f(Re,{name:"hi-paper-airplane",class:"text-white animate-pulse",scale:"1.5"})])]),b("p",Te,y(M.value),1)])):x("",!0)])}}}),[["__scopeId","data-v-5cc0b2fc"]]))}}});
