System.register(["./index-legacy-DiWsflZD.js","./expertAdmin-legacy-Bj-YeU5p.js","./_plugin-vue_export-helper-legacy-BVIICed7.js"],function(e,a){"use strict";var t,i,l,n,r,d,s,o,c,u,m,g,p,f,b,x,v,y,h,w,C,k,F,E,j,A,D,S,z,N,L,I,_;return{setters:[e=>{t=e.a,i=e.k,l=e.$,n=e.j,r=e.r,d=e.b,s=e.o,o=e.F,c=e.e,u=e.W,m=e.n,g=e.Z,p=e.f,f=e.t,b=e.x,x=e.a8,v=e.p,y=e.A,h=e.J,w=e.K,C=e.V,k=e.L,F=e.a1,E=e.u,j=e.q,A=e.v,D=e.Q,S=e.E,z=e.G,N=e.H,L=e.I},e=>{I=e.u},e=>{_=e._}],execute:function(){var a=document.createElement("style");a.textContent=".admin-appointment-card[data-v-1242dfe3]{font-family:Poppins,sans-serif;width:100%}.admin-card[data-v-1242dfe3]{background:#fff;border-radius:16px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.08);cursor:pointer;min-height:120px;display:flex;flex-direction:column;position:relative;overflow:hidden;border:1px solid #e5e7eb}.admin-card-header[data-v-1242dfe3]{display:flex;align-items:center;justify-content:space-between;width:100%}.admin-icon-container[data-v-1242dfe3]{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:12px}.admin-card-info[data-v-1242dfe3]{flex:1;text-align:left}.admin-title[data-v-1242dfe3]{font-weight:600;font-size:16px;color:#111827;margin-bottom:4px}.admin-meta[data-v-1242dfe3]{display:flex;gap:8px}.admin-date[data-v-1242dfe3],.admin-time[data-v-1242dfe3]{font-size:14px;color:#6b7280}.admin-status[data-v-1242dfe3]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.admin-status.finished[data-v-1242dfe3]{background:#d1fae5;color:#065f46}.admin-status.pending[data-v-1242dfe3]{background:#fef3c7;color:#92400e}.admin-status.cancel[data-v-1242dfe3]{background:#fec7c7;color:#920e0e}.admin-modal[data-v-1242dfe3]{background:#fff;border-radius:20px;padding:24px;box-shadow:0 10px 25px rgba(0,0,0,.1);border:1px solid #e5e7eb;margin:0 auto}.admin-modal-header[data-v-1242dfe3]{display:flex;align-items:center;margin-bottom:20px}.admin-back-button[data-v-1242dfe3]{display:flex;align-items:center;gap:8px;background:none;border:none;color:#2563eb;cursor:pointer;font-weight:500}.admin-modal-title[data-v-1242dfe3]{flex:1;text-align:center;font-size:20px;font-weight:600;color:#111827}.admin-section[data-v-1242dfe3]{margin-bottom:24px}.admin-section-title[data-v-1242dfe3]{font-size:16px;font-weight:600;color:#374151;margin-bottom:12px}.admin-grid[data-v-1242dfe3]{display:grid;grid-template-columns:1fr;gap:12px}.admin-grid-item[data-v-1242dfe3]{display:flex;align-items:center;gap:12px;padding:12px;background:#f9fafb;border-radius:12px}.admin-grid-icon[data-v-1242dfe3]{width:20px;height:20px;color:#2563eb}.admin-grid-label[data-v-1242dfe3]{font-size:14px;color:#6b7280;min-width:120px}.admin-grid-value[data-v-1242dfe3]{font-size:14px;color:#111827;font-weight:500}.admin-grid-link[data-v-1242dfe3]{color:#2563eb;text-decoration:none}.admin-grid-link[data-v-1242dfe3]:hover{text-decoration:underline}.admin-modal-footer[data-v-1242dfe3]{margin-top:20px;text-align:center}.admin-created-at[data-v-1242dfe3]{font-size:12px;color:#9ca3af}.admin-actions[data-v-1242dfe3]{display:flex;gap:12px;margin-top:24px}.admin-action-button[data-v-1242dfe3]{flex:1;padding:3px;border-radius:8px;border:none;cursor:pointer;transition:all .2s}.admin-action-button.edit[data-v-1242dfe3]{background:#f4f9ff;color:#2563eb}.admin-action-button.cancel[data-v-1242dfe3]{background:#fff1f1;color:#dc2626}.admin-action-button.complete[data-v-1242dfe3]{background:#ebfff5;color:#065f46}.admin-action-button.link[data-v-1242dfe3]{background:#c9ceff;color:#003045}.admin-action-button[data-v-1242dfe3]:hover{opacity:.9}.animate-fade-in[data-v-7a8c36e6]{animation:fadeIn-7a8c36e6 .3s ease-out}@keyframes fadeIn-7a8c36e6{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}\n",document.head.appendChild(a);const P={class:"admin-appointment-card py-1"},U={class:"admin-card-info admin-title"},B={class:"admin-meta"},M={class:"admin-date"},H={class:"admin-time"},R={key:0,class:""},V={key:1,class:"finished"},q={key:2,class:"cancel"},G={key:1,class:"admin-modal"},J={class:"admin-modal-header"},O={class:"admin-grid"},$={class:"admin-grid-item"},X={class:"admin-grid-value"},T={class:"admin-grid-item"},W={class:"admin-grid-value"},Y={class:"admin-grid-item"},K={class:"admin-grid-value"},Q={class:"admin-grid-item"},Z=["href"],ee={class:"admin-grid"},ae={class:"admin-grid-item"},te={class:"admin-grid-value"},ie={class:"flex items-center gap-2 border-b border-b-gray-100 pb-2 mb-2"},le={class:"flex justify-between items-center w-full"},ne={key:0,class:"flex items-center gap-2 border-b border-b-gray-100 pb-2 mb-2"},re={class:"flex justify-between items-center w-full"},de={key:0,class:"font-medium text-gray-600"},se={key:1,class:"flex items-center gap-2 border-b border-b-gray-100 pb-2 mb-2"},oe={class:"flex justify-between items-center w-full"},ce={key:0,class:"font-medium text-gray-600"},ue={key:2,class:"flex items-center gap-2 border-b border-b-gray-100 pb-2 mb-2"},me={class:"flex justify-between items-center w-full"},ge={key:0,class:"font-medium text-gray-600"},pe={class:"admin-modal-footer"},fe={class:"admin-created-at"},be={class:"admin-actions"},xe={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in"},ve={class:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl transform transition-all scale-100 animate-jump-in"},ye={class:"flex items-center justify-between mb-4"},he={key:1,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in"},we={class:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl transform transition-all scale-100 animate-jump-in"},Ce={class:"flex items-center justify-between mb-4"},ke=_(t({__name:"ExpertScheduleData",props:{data:{type:Object,required:!0}},emits:["reloadData"],setup(e,{emit:a}){const t=i([{specialty:"Importación y Exportación",color:{light:"#E6F3FF",strong:"#0066CC"},icon:"fa-truck-moving",description:"Facilitamos el intercambio de bienes y servicios a nivel internacional con normativas seguras."},{specialty:"Médico",color:{light:"#E6F7FF",strong:"#0099CC"},icon:"gi-stethoscope",description:"Profesionales de la salud comprometidos en atender tus necesidades médicas de forma personalizada."},{specialty:"Contador",color:{light:"#E6FFE6",strong:"#008000"},icon:"bi-calculator-fill",description:"Expertos en contabilidad para gestionar tus finanzas de forma precisa y confiable."},{specialty:"Arquitecto",color:{light:"#F0E6FF",strong:"#6600CC"},icon:"md-architecture-sharp",description:"Diseño y planificación de espacios con profesionalismo y creatividad."},{specialty:"Servicios Web",color:{light:"#E6F9FF",strong:"#00BFFF"},icon:"md-web",description:"Desarrollo de soluciones digitales a medida para potenciar tu presencia online."},{specialty:"Publicidad",color:{light:"#FFF0E6",strong:"#FF6600"},icon:"ri-newspaper-fill",description:"Estrategias creativas para difundir y potenciar la imagen de tu marca."},{specialty:"Traductores",color:{light:"#FFF8E6",strong:"#FFD700"},icon:"hi-solid-translate",description:"Especialistas en comunicación multilingüe para romper barreras idiomáticas."},{specialty:"Peritaje",color:{light:"#F0E6FF",strong:"#800080"},icon:"gi-sherlock-holmes",description:"Evaluaciones técnicas y profesionales con rigor y precisión."},{specialty:"Ingeniería en Computación",color:{light:"#E6FFFA",strong:"#00CED1"},icon:"md-computer-twotone",description:"Innovación tecnológica y desarrollo de sistemas a la vanguardia."},{specialty:"Gestoría en Trámites",color:{light:"#E6E6FF",strong:"#4B0082"},icon:"ri-newspaper-fill",description:"Optimiza tus gestiones administrativas con asesorías especializadas."},{specialty:"Marketing",color:{light:"#FFE6F0",strong:"#FF1493"},icon:"ri-marketing-strategy-fill",description:"Conecta con tu audiencia a través de estrategias innovadoras y efectivas."},{specialty:"Abogado",color:{light:"#F5E6D3",strong:"#8B4513"},icon:"fa-balance-scale",description:"Conecta con un abogado especializado para recibir asesoría legal directa y resolver tus asuntos jurídicos."},{specialty:"Psicólogo/a",color:{light:"#E6E6FF",strong:"#6A5ACD"},icon:"ri-psychotherapy-fill",description:"Asesoría psicológica para resolver tus dudas y resolver tus problemas."},{specialty:"Maestro",color:{light:"#F0FFF0",strong:"#2E8B57"},icon:"gi-teacher",description:"Asesoría educativa para resolver tus dudas y resolver tus problemas."},{specialty:"Chef",color:{light:"#FFE6E6",strong:"#FF4500"},icon:"gi-chef-toque"}]),E=e=>{const a=t.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.color.light:"#E6E6E6"},j=e=>{const a=t.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.color.strong:"#E6E6E6"},A=e=>{const a=t.value.find(a=>a.specialty.toLowerCase().trim()===e.toLowerCase().trim());return a?a.icon:""},D=e,S=l(()=>{var e;if(null===(e=D.data)||void 0===e||!e.createdAt)return null;const a=new Date(1e3*D.data.createdAt.seconds),t=a.getDay(),i=(e=>{const a=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return["domingo","lunes","martes","miercoles","jueves","viernes","sabado"].findIndex(e=>a.includes(e))})(D.data.DayName||D.data.dayName||"");if(-1===i)return a;let l=i-t;l<=0&&(l+=7);const n=new Date(a);return n.setDate(a.getDate()+l),n}),z=l(()=>S.value?S.value.toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Fecha no disponible"),N=l(()=>D.data.expertSchedule.time);l(()=>{var e;return(null===(e=S.value)||void 0===e?void 0:e.toLocaleDateString("es-MX",{weekday:"long"}))||D.data.DayName});const L=i("card"),I=()=>{L.value="card"===L.value?"modal":"card"},_=n(),ke=a,Fe=async(e,a)=>{try{const t=h(_,`schedules/${D.data.docId}`),i=await w(t);i.exists()||console.log("No se encontró el documento"),console.log(JSON.stringify(i.data()));const l={isFinished:!1,isCanceled:!1,finishedAt:null,canceledAt:null,cancelationReason:"",canceledByName:"",canceledByUid:"",appointmentLink:""};"finish"===e&&(l.isFinished=!0,l.finishedAt=C.now()),"cancel"===e&&(l.isCanceled=!0,l.canceledAt=C.now(),l.cancelationReason=a||"Cancelada por el administrador",l.canceledByName=k().getUserName,l.canceledByUid=k().getUserUid),"link"===e&&(l.appointmentLink=a),await F(t,l),ke("reloadData"),console.log("Documentos actualizados correctamente")}catch(t){console.error("Error al marcar la consulta:",t)}},Ee=i(!1),je=i(""),Ae=i(!1),De=i(""),Se=()=>{je.value="",Ee.value=!0},ze=()=>{Ee.value=!1},Ne=()=>{je.value&&""!==je.value.trim()?(Fe("cancel",je.value),ze()):alert("El motivo es obligatorio para cancelar la cita.")},Le=()=>{Ae.value=!1},Ie=()=>{De.value&&""!==De.value.trim()?(Fe("link",De.value),Le()):alert("El enlace es obligatorio.")};return(e,a)=>{const t=r("v-icon");return s(),d(o,null,[c("section",P,["card"===L.value?(s(),d("article",{key:0,class:"admin-card",onClick:I},[c("div",{class:"admin-card-header admin-icon-container",style:g({backgroundColor:E(D.data.expertSpecialty)})},[p(t,{name:A(D.data.expertSpecialty),scale:"1.4",style:g({color:j(D.data.expertSpecialty)})},null,8,["name","style"])],4),c("h3",U,f(D.data.expertSpecialty)+" · "+f(D.data.userName),1),c("div",B,[c("span",M,f(z.value),1),c("span",H,f(N.value)+" hrs",1)]),c("div",{class:b(["admin-status",{finished:D.data.isFinished,cancel:D.data.isCanceled,pending:!D.data.isFinished&&!D.data.isCanceled}])},[D.data.isFinished||D.data.isCanceled?m("",!0):(s(),d("p",R,"Agendada")),D.data.isFinished?(s(),d("p",V,"Finalizada")):m("",!0),D.data.isCanceled?(s(),d("p",q,"Cancelada")):m("",!0)],2)])):m("",!0),"modal"===L.value?(s(),d("div",G,[c("div",J,[c("button",{class:"admin-back-button",onClick:I},[p(t,{class:"text-blue-600",name:"fa-chevron-left"}),a[4]||(a[4]=c("span",null,"Cerrar",-1))]),a[5]||(a[5]=c("h2",{class:"admin-modal-title"},"Detalles de la Cita",-1))]),a[16]||(a[16]=c("h4",{class:"admin-section admin-section-title"},"Datos de la Cita",-1)),c("div",O,[c("div",$,[p(t,{class:"admin-grid-icon",name:"fa-calendar-check"}),a[6]||(a[6]=c("p",{class:"admin-grid-label"},"Fecha:",-1)),c("p",X,f(z.value),1)]),c("div",T,[p(t,{class:"admin-grid-icon",name:"fa-clock"}),a[7]||(a[7]=c("p",{class:"admin-grid-label"},"Hora:",-1)),c("p",W,f(N.value)+" hrs",1)]),c("div",Y,[p(t,{class:"admin-grid-icon",name:"fa-user"}),a[8]||(a[8]=c("p",{class:"admin-grid-label"},"Agendado por:",-1)),c("p",K,f(D.data.userName),1)]),c("div",Q,[p(t,{class:"admin-grid-icon",name:"co-link"}),a[9]||(a[9]=c("p",{class:"admin-grid-label"},"Enlace:",-1)),"En proceso..."!==D.data.appointmentLink?(s(),d("a",{key:0,class:"admin-grid-link break-all",target:"_blank",href:D.data.appointmentLink},f(D.data.appointmentLink),9,Z)):m("",!0),a[10]||(a[10]=c("p",{class:"admin-grid-value pending"},"En proceso...",-1))])]),a[17]||(a[17]=c("h4",{class:"admin-section admin-section-title"},"Datos del Experto",-1)),c("div",ee,[c("div",ae,[p(t,{class:"admin-grid-icon",name:"fa-id-card"}),a[11]||(a[11]=c("p",{class:"admin-grid-label"},"Cédula:",-1)),c("p",te,f(D.data.expertProfessionalId),1)])]),c("article",ie,[c("div",{class:b(["w-14 h-14 flex items-center justify-center rounded-2xl mr-3",D.data.isFinished?"bg-green-50":D.data.isCanceled?"bg-red-50":"bg-yellow-50"])},[p(t,{class:b(["text-2xl",D.data.isFinished?"text-green-600":D.data.isCanceled?"text-red-600":"text-yellow-600"]),name:"hi-solid-information-circle"},null,8,["class"])],2),c("div",le,[a[12]||(a[12]=c("p",{class:"font-medium text-gray-600"},"Status de la cita:",-1)),c("p",{class:b(["font-medium text-gray-600",D.data.isFinished?"text-green-600":D.data.isCanceled?"text-red-600":"text-yellow-600"])},f(D.data.isFinished?"Finalizada":D.data.isCanceled?"Cancelada":"Reservada"),3)])]),D.data.isCanceled?(s(),d("article",ne,[c("div",{class:b(["w-14 h-14 flex items-center justify-center rounded-2xl mr-3",D.data.isFinished?"bg-green-50":D.data.isCanceled?"bg-red-50":"bg-yellow-50"])},[p(t,{class:b(["text-2xl",D.data.isFinished?"text-green-600":D.data.isCanceled?"text-red-600":"text-yellow-600"]),name:"md-freecancellation-twotone"},null,8,["class"])],2),c("div",re,[a[13]||(a[13]=c("p",{class:"font-medium text-gray-600"},"Motivo de cancelación:",-1)),D.data.canceledAt?(s(),d("p",de,f(D.data.cancelationReason),1)):m("",!0)])])):m("",!0),D.data.isCanceled?(s(),d("article",se,[c("div",{class:b(["w-14 h-14 flex items-center justify-center rounded-2xl mr-3",D.data.isFinished?"bg-green-50":D.data.isCanceled?"bg-red-50":"bg-yellow-50"])},[p(t,{class:b(["text-2xl",D.data.isFinished?"text-green-600":D.data.isCanceled?"text-red-600":"text-yellow-600"]),name:"fa-user"},null,8,["class"])],2),c("div",oe,[a[14]||(a[14]=c("p",{class:"font-medium text-gray-600"},"Cancelado por:",-1)),D.data.canceledAt?(s(),d("p",ce,f(D.data.canceledByName),1)):m("",!0)])])):m("",!0),D.data.isCanceled?(s(),d("article",ue,[c("div",{class:b(["w-14 h-14 flex items-center justify-center rounded-2xl mr-3",D.data.isFinished?"bg-green-50":D.data.isCanceled?"bg-red-50":"bg-yellow-50"])},[p(t,{class:b(["text-2xl",D.data.isFinished?"text-green-600":D.data.isCanceled?"text-red-600":"text-yellow-600"]),name:"fa-calendar-check"},null,8,["class"])],2),c("div",me,[a[15]||(a[15]=c("p",{class:"font-medium text-gray-600"},"Fecha de cancelación:",-1)),D.data.canceledAt?(s(),d("p",ge,f(new Date(D.data.canceledAt.toDate()).toLocaleString("es-MX",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})),1)):m("",!0)])])):m("",!0),c("div",pe,[c("p",fe,"Creada el "+f(D.data.createdAt.toDate().toLocaleString("es-ES",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),c("div",be,[D.data.isCanceled?m("",!0):(s(),d("button",{key:0,class:"admin-action-button edit !text-xs hidden",onClick:a[0]||(a[0]=e=>Fe("notFinish"))},"No finalizada")),D.data.isCanceled?m("",!0):(s(),d("button",{key:1,class:"admin-action-button cancel text-md ring-1 ring-red-500",onClick:Se},"Cancelar Cita")),D.data.isFinished?m("",!0):(s(),d("button",{key:2,class:"admin-action-button complete text-xs",onClick:a[1]||(a[1]=e=>Fe("finish"))},"Finalizar Cita"))])])):m("",!0)]),(s(),u(x,{to:"body"},[Ee.value?(s(),d("div",xe,[c("div",ve,[c("div",ye,[a[18]||(a[18]=c("h3",{class:"text-xl font-bold text-gray-800"},"Cancelar Cita",-1)),c("button",{onClick:ze,class:"text-gray-400 hover:text-gray-600 transition-colors"},[p(t,{name:"io-close",scale:"1.2"})])]),a[20]||(a[20]=c("p",{class:"text-gray-600 mb-4 text-sm"},"Por favor, ingrese el motivo de la cancelación. Es obligatorio para continuar.",-1)),v(c("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>je.value=e),rows:"3",class:"w-full border border-gray-200 bg-gray-50 rounded-xl p-3 mb-6 focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-all resize-none text-gray-700 placeholder-gray-400",placeholder:"Escriba el motivo detallado aquí..."},"        ",512),[[y,je.value]]),c("div",{class:"flex justify-end gap-3"},[c("button",{onClick:ze,class:"px-5 py-2.5 text-gray-600 font-medium hover:bg-gray-100 rounded-xl transition-colors"}," Regresar "),c("button",{onClick:Ne,class:"px-5 py-2.5 bg-red-500 text-white font-medium rounded-xl hover:bg-red-600 shadow-lg shadow-red-200 transition-all flex items-center gap-2"},[...a[19]||(a[19]=[c("span",null,"Confirmar Cancelación",-1)])])])])])):m("",!0),Ae.value?(s(),d("div",he,[c("div",we,[c("div",Ce,[a[21]||(a[21]=c("h3",{class:"text-xl font-bold text-gray-800"},"Agregar Enlace",-1)),c("button",{onClick:Le,class:"text-gray-400 hover:text-gray-600 transition-colors"},[p(t,{name:"io-close",scale:"1.2"})])]),a[22]||(a[22]=c("p",{class:"text-gray-600 mb-4 text-sm"},"Por favor, ingrese el enlace de la reunión o videollamada.",-1)),v(c("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>De.value=e),type:"text",class:"w-full border border-gray-200 bg-gray-50 rounded-xl p-3 mb-6 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-700 placeholder-gray-400",placeholder:"https://meet.google.com/..."},null,512),[[y,De.value]]),c("div",{class:"flex justify-end gap-3"},[c("button",{onClick:Le,class:"px-5 py-2.5 text-gray-600 font-medium hover:bg-gray-100 rounded-xl transition-colors"}," Cancelar "),c("button",{onClick:Ie,class:"px-5 py-2.5 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all"}," Guardar Enlace ")])])])):m("",!0)]))],64)}}}),[["__scopeId","data-v-1242dfe3"]]),Fe={class:"web-page min-h-screen bg-gray-50"},Ee={class:"p-4 px-7 space-y-6 mt-24"},je={class:"bg-white shadow-sm border border-gray-100 rounded-2xl p-6 flex flex-col items-center"},Ae={class:"relative mb-4"},De=["src"],Se={class:"text-2xl font-bold text-gray-900"},ze={key:0,class:"text-red-600 font-bold"},Ne={class:"mt-1 text-blue-600 font-medium"},Le={class:"bg-white shadow-sm border border-gray-100 rounded-2xl overflow-hidden"},Ie={class:"divide-y divide-gray-100"},_e={class:"text-gray-500 font-medium"},Pe={class:"bg-white shadow-sm border border-gray-100 rounded-2xl p-6"},Ue={class:"text-gray-600 leading-relaxed"},Be={class:"bg-white shadow-sm border border-gray-100 rounded-2xl p-6"},Me={class:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"},He={class:"flex gap-2"},Re={key:0,class:"space-y-6 animate-fade-in"},Ve={class:"flex items-center gap-3 p-4 bg-blue-50 rounded-2xl border border-blue-100"},qe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ge={class:"text-blue-600 font-bold mb-3 text-center border-b border-blue-100 pb-2"},Je={class:"grid grid-cols-2 gap-2"},Oe=["onClick"],$e=["disabled"],Xe={key:0,class:"space-y-4 animate-fade-in"},Te={key:0,class:"flex justify-center p-10"},We={key:1,class:"text-center p-10 text-gray-400"},Ye={key:2,class:"grid gap-4"};e("default",_(t({__name:"ExpertPreview",setup(e){const a=E(),t=n(),r=I(),g=i(!1),p=i(!1),x=i(!1),y=i(!1),w=i(!1),C=i([]),k=l(()=>{var e,a,t,i,l,n,d,s;return[{label:"Nombre",value:(null===(e=r.getCurrentExpert)||void 0===e?void 0:e.fullName)||"N/A"},{label:"Email",value:(null===(a=r.getCurrentExpert)||void 0===a?void 0:a.email)||"N/A"},{label:"Especialidad",value:(null===(t=r.getCurrentExpert)||void 0===t?void 0:t.specialty)||"N/A"},{label:"Cédula",value:(null===(i=r.getCurrentExpert)||void 0===i?void 0:i.professionalId)||"No proporcionada"},{label:"Estado",value:null!==(l=r.getCurrentExpert)&&void 0!==l&&l.isSuspended?"Suspendido":"Activo",class:null!==(n=r.getCurrentExpert)&&void 0!==n&&n.isSuspended?"text-red-500 font-bold":"text-green-600 font-bold"},{label:"Motivo Suspensión",value:(null===(d=r.getCurrentExpert)||void 0===d?void 0:d.suspensionReason)||"Ninguno",class:null!==(s=r.getCurrentExpert)&&void 0!==s&&s.isSuspended?"text-red-400":"text-gray-400"}]}),_=l(()=>{var e;const a=(null===(e=r.getCurrentExpert)||void 0===e?void 0:e.schedule)||{},t={};return["Lunes","Martes","Miercoles","Jueves","Viernes","Sábado"].forEach(e=>{a[e]&&(t[e]=a[e])}),t}),P=()=>{p.value=!p.value,p.value&&0===C.value.length&&U()},U=async()=>{var e;const i=null===(e=r.getCurrentExpert)||void 0===e?void 0:e.userUid;if(i){w.value=!0;try{const e=S(z(t,"schedules"),N("expertUid","==",i)),a=await L(e);C.value=a.docs.map(e=>({...e.data(),docId:e.id,docRef:e.ref}))}catch(l){console.error(l),a.error("Error al cargar consultas")}finally{w.value=!1}}},B=async()=>{var e;const i=null===(e=r.getCurrentExpert)||void 0===e?void 0:e.docId;if(i){y.value=!0;try{await F(h(t,`experts/${i}`),{schedule:_.value}),a.success("Horario actualizado"),x.value=!1}catch(l){console.error(l),a.error("Error al guardar cambios")}finally{y.value=!1}}};return(e,t)=>{var i,l,n,h,F,E;return s(),d("div",Fe,[c("main",Ee,[c("div",je,[c("div",Ae,[c("img",{class:b(["w-32 h-32 rounded-xl object-cover ring-4 ring-offset-4",null!==(i=j(r).getCurrentExpert)&&void 0!==i&&i.isSuspended?"ring-red-500":"ring-blue-500"]),src:(null===(l=j(r).getCurrentExpert)||void 0===l?void 0:l.imgUrl)||"https://picsum.photos/200/300",alt:"Profile picture"},null,10,De)]),c("h1",Se,f((null===(n=j(r).getCurrentExpert)||void 0===n?void 0:n.fullName)||"Juan Pérez"),1),null!==(h=j(r).getCurrentExpert)&&void 0!==h&&h.isSuspended?(s(),d("p",ze,"(Suspendido)")):m("",!0),c("p",Ne,f((null===(F=j(r).getCurrentExpert)||void 0===F?void 0:F.specialty)||"Especialidad"),1)]),c("div",Le,[t[2]||(t[2]=c("div",{class:"bg-gray-50 px-6 py-4 border-b border-gray-100"},[c("h2",{class:"text-lg font-bold text-gray-800"},"Información del experto")],-1)),c("div",Ie,[(s(!0),d(o,null,A(k.value,e=>(s(),d("div",{class:"px-6 py-4 flex justify-between items-center",key:e.label},[c("span",_e,f(e.label),1),c("span",{class:b(["text-gray-900",e.class])},f(e.value),3)]))),128))])]),c("div",Pe,[t[3]||(t[3]=c("h2",{class:"text-lg font-bold text-gray-800 mb-3"},"Biografía",-1)),c("p",Ue,f(`${(null===(E=j(r).getCurrentExpert)||void 0===E?void 0:E.bio)||"Sin biografía disponible."}`),1)]),c("div",Be,[c("div",Me,[t[4]||(t[4]=c("h2",{class:"text-lg font-bold text-gray-800"},"Horarios Disponibles",-1)),c("div",He,[c("button",{onClick:t[0]||(t[0]=e=>g.value=!g.value),class:b(["px-4 py-2 rounded-xl text-sm font-semibold transition-all",g.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"])},f(g.value?"Ocultar Horarios":"Ver Horarios"),3),c("button",{onClick:P,class:b(["px-4 py-2 rounded-xl text-sm font-semibold transition-all",p.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-600"])}," Ver Consultas ",2)])]),g.value?(s(),d("div",Re,[c("div",Ve,[v(c("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>x.value=e),class:"w-5 h-5 text-blue-600 rounded"},null,512),[[D,x.value]]),t[5]||(t[5]=c("span",{class:"text-sm font-medium text-blue-800"},"Habilitar edición de horarios",-1))]),c("div",qe,[(s(!0),d(o,null,A(_.value,(e,t)=>(s(),d("div",{key:t,class:"p-4 bg-gray-50 rounded-2xl border border-gray-100"},[c("h3",Ge,f(t),1),c("div",Je,[(s(!0),d(o,null,A(e,(e,i)=>(s(),d("button",{key:i,onClick:i=>((e,t)=>{if(!x.value)return void a.info("Habilite la edición para modificar los horarios");const i=_.value[e];if(i){const e=i.find(e=>e.time===t);e&&(e.isAvailable=!e.isAvailable)}})(t,e.time),class:b(["py-2 px-1 text-xs font-semibold rounded-lg border transition-all",e.isAvailable?"bg-white text-gray-700 border-gray-200":"bg-blue-600 text-white border-blue-600"])},f(e.time),11,Oe))),128))])]))),128))]),c("button",{onClick:B,disabled:!x.value||y.value,class:"w-full h-12 bg-blue-600 text-white font-bold rounded-xl shadow-lg disabled:opacity-50 transition-all"},f(y.value?"Guardando...":"Guardar Cambios de Horario"),9,$e)])):m("",!0)]),p.value?(s(),d("section",Xe,[t[7]||(t[7]=c("h2",{class:"text-lg font-bold text-gray-800"},"Consultas del Experto",-1)),w.value?(s(),d("div",Te,[...t[6]||(t[6]=[c("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"},null,-1)])])):0===C.value.length?(s(),d("div",We," No hay consultas registradas. ")):(s(),d("div",Ye,[(s(!0),d(o,null,A(C.value,(e,a)=>(s(),u(ke,{key:a,data:e,onReloadData:U},null,8,["data"]))),128))]))])):m("",!0)])])}}}),[["__scopeId","data-v-7a8c36e6"]]))}}});
